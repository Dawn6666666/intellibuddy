![(二)系统设计](https://via.placeholder.com/800x200?text=System+Design)

# 毕业设计 - (二)系统设计

学习系统架构设计方法。

---


### 2.1 架构设计

```python
class SystemArchitecture:
    def __init__(self, project_type):
        self.project_type = project_type
        self.components = {}
        self.technologies = {}
    
    def design_web_architecture(self):
        """Web应用架构设计"""
        return {
            'frontend': {
                'framework': 'React/Vue.js',
                'ui_library': 'Ant Design/Element UI',
                'state_management': 'Redux/Vuex',
                'build_tool': 'Webpack/Vite'
            },
            'backend': {
                'framework': 'Express.js/Spring Boot',
                'database': 'MySQL/PostgreSQL',
                'cache': 'Redis',
                'message_queue': 'RabbitMQ/Kafka'
            },
            'infrastructure': {
                'web_server': 'Nginx',
                'container': 'Docker',
                'orchestration': 'Kubernetes',
                'cloud': 'AWS/Azure/阿里云'
            }
        }
    
    def design_ai_architecture(self):
        """AI项目架构设计"""
        return {
            'data_layer': {
                'storage': 'HDFS/S3',
                'database': 'MongoDB/Elasticsearch',
                'preprocessing': 'Pandas/Spark'
            },
            'model_layer': {
                'framework': 'TensorFlow/PyTorch',
                'training': 'GPU Cluster',
                'serving': 'TensorFlow Serving/TorchServe'
            },
            'api_layer': {
                'framework': 'FastAPI/Flask',
                'gateway': 'Kong/Zuul',
                'monitoring': 'Prometheus/Grafana'
            }
        }
    
    def generate_architecture_diagram(self):
        """生成架构图（伪代码）"""
        if self.project_type == 'web':
            arch = self.design_web_architecture()
        elif self.project_type == 'ai':
            arch = self.design_ai_architecture()
        
        print("🏗️  系统架构:")
        for layer, components in arch.items():
            print(f"\n📦 {layer.upper()}:")
            for component, tech in components.items():
                print(f"  • {component}: {tech}")

# 架构设计示例
web_arch = SystemArchitecture('web')
web_arch.generate_architecture_diagram()

print("\n" + "="*50 + "\n")

ai_arch = SystemArchitecture('ai')
ai_arch.generate_architecture_diagram()
```

### 2.2 数据库设计

```python
class DatabaseDesign:
    def __init__(self):
        self.tables = {}
        self.relationships = []
    
    def design_ecommerce_db(self):
        """电商系统数据库设计"""
        
        # 用户表
        self.tables['users'] = {
            'id': 'INT PRIMARY KEY AUTO_INCREMENT',
            'username': 'VARCHAR(50) UNIQUE NOT NULL',
            'email': 'VARCHAR(100) UNIQUE NOT NULL',
            'password_hash': 'VARCHAR(255) NOT NULL',
            'phone': 'VARCHAR(20)',
            'created_at': 'TIMESTAMP DEFAULT CURRENT_TIMESTAMP',
            'updated_at': 'TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'
        }
        
        # 商品表
        self.tables['products'] = {
            'id': 'INT PRIMARY KEY AUTO_INCREMENT',
            'name': 'VARCHAR(200) NOT NULL',
            'description': 'TEXT',
            'price': 'DECIMAL(10,2) NOT NULL',
            'stock': 'INT DEFAULT 0',
            'category_id': 'INT',
            'image_url': 'VARCHAR(500)',
            'status': 'ENUM("active", "inactive") DEFAULT "active"',
            'created_at': 'TIMESTAMP DEFAULT CURRENT_TIMESTAMP'
        }
        
        # 订单表
        self.tables['orders'] = {
            'id': 'INT PRIMARY KEY AUTO_INCREMENT',
            'user_id': 'INT NOT NULL',
            'total_amount': 'DECIMAL(10,2) NOT NULL',
            'status': 'ENUM("pending", "paid", "shipped", "delivered", "cancelled")',
            'shipping_address': 'TEXT',
            'created_at': 'TIMESTAMP DEFAULT CURRENT_TIMESTAMP'
        }
        
        # 订单详情表
        self.tables['order_items'] = {
            'id': 'INT PRIMARY KEY AUTO_INCREMENT',
            'order_id': 'INT NOT NULL',
            'product_id': 'INT NOT NULL',
            'quantity': 'INT NOT NULL',
            'price': 'DECIMAL(10,2) NOT NULL'
        }
        
        # 定义关系
        self.relationships = [
            ('orders', 'user_id', 'users', 'id'),
            ('order_items', 'order_id', 'orders', 'id'),
            ('order_items', 'product_id', 'products', 'id')
        ]
    
    def generate_sql(self):
        """生成SQL建表语句"""
        sql_statements = []
        
        for table_name, columns in self.tables.items():
            sql = f"CREATE TABLE {table_name} (\n"
            column_defs = []
            
            for column_name, column_type in columns.items():
                column_defs.append(f"  {column_name} {column_type}")
            
            sql += ",\n".join(column_defs)
            sql += "\n);"
            sql_statements.append(sql)
        
        # 添加外键约束
        for table, fk_column, ref_table, ref_column in self.relationships:
            fk_sql = f"ALTER TABLE {table} ADD FOREIGN KEY ({fk_column}) REFERENCES {ref_table}({ref_column});"
            sql_statements.append(fk_sql)
        
        return sql_statements
    
    def print_schema(self):
        """打印数据库模式"""
        print("🗄️  数据库设计:")
        for table_name, columns in self.tables.items():
            print(f"\n📋 {table_name.upper()}:")
            for column_name, column_type in columns.items():
                print(f"  • {column_name}: {column_type}")

# 数据库设计示例
db_design = DatabaseDesign()
db_design.design_ecommerce_db()
db_design.print_schema()

print("\n📝 SQL语句:")
sql_statements = db_design.generate_sql()
for i, sql in enumerate(sql_statements[:2]):  # 只显示前两个
    print(f"\n-- 表 {i+1}")
    print(sql)
```

---

## 3. 项目实施