![(四)组合数学](https://via.placeholder.com/800x200?text=Combinatorics)

# 离散数学 - (四)组合数学

学习排列组合和计数原理。

---


### 4.1 计数原理

**加法原理**：做一件事有 $n$ 类办法，第 $i$ 类有 $a_i$ 种方法，则总共有

$$
\sum_{i=1}^{n} a_i
$$

种方法。

**乘法原理**：做一件事需 $n$ 个步骤，第 $i$ 步有 $a_i$ 种方法，则总共有

$$
\prod_{i=1}^{n} a_i
$$

种方法。

**示例：**

从北京到上海有3趟火车、2趟飞机，从上海到广州有4趟火车、1趟飞机。

- 北京到上海的方法数：$3 + 2 = 5$（加法）
- 北京到广州（途经上海）：$(3 + 2) \times (4 + 1) = 25$（乘法）

### 4.2 排列与组合

**排列**：从 $n$ 个元素中取 $r$ 个排成一列。

$$
P(n, r) = A_n^r = \frac{n!}{(n-r)!}
$$

**组合**：从 $n$ 个元素中取 $r$ 个（不考虑顺序）。

$$
C(n, r) = \binom{n}{r} = \frac{n!}{r!(n-r)!}
$$

**关系**：

$$
P(n, r) = r! \cdot C(n, r)
$$

**示例：**

从5个人中选3人排队：

$$
P(5, 3) = \frac{5!}{2!} = 60
$$

从5个人中选3人组队：

$$
C(5, 3) = \frac{5!}{3! \cdot 2!} = 10
$$

**Python实现：**

```python
import math

def P(n, r):
    """排列数"""
    return math.factorial(n) // math.factorial(n - r)

def C(n, r):
    """组合数"""
    return math.factorial(n) // (math.factorial(r) * math.factorial(n - r))

print(P(5, 3))  # 60
print(C(5, 3))  # 10
```

### 4.3 二项式定理

**定理**：

$$
(a + b)^n = \sum_{k=0}^{n} \binom{n}{k} a^{n-k} b^k
$$

**示例**：

$$
(x + y)^3 = \binom{3}{0}x^3 + \binom{3}{1}x^2y + \binom{3}{2}xy^2 + \binom{3}{3}y^3
$$

$$
= x^3 + 3x^2y + 3xy^2 + y^3
$$

**性质：**

**1. 对称性**

$$
\binom{n}{k} = \binom{n}{n-k}
$$

**2. 递推公式（杨辉三角）**

$$
\binom{n}{k} = \binom{n-1}{k-1} + \binom{n-1}{k}
$$

**3. 行和**

$$
\sum_{k=0}^{n} \binom{n}{k} = 2^n
$$

### 4.4 鸽巢原理

**原理**：将 $n+1$ 个物体放入 $n$ 个盒子，至少有一个盒子包含2个或更多物体。

**应用示例：**

在任意367人中，至少有2人生日相同。

$$
\text{人数} = 367 > 366 = \text{可能的生日数}
$$

**编程应用**（哈希冲突）：

```python
# 鸽巢原理导致哈希冲突
hash_table = [None] * 10  # 10个槽位
items = range(15)  # 15个元素

# 必然有冲突（15个元素放入10个槽位）
```

---

## 5. 图论