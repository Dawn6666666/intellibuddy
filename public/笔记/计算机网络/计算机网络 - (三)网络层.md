![(三)网络层](https://via.placeholder.com/800x200?text=Network+Layer)

# 计算机网络 - (三)网络层

掌握IP路由原理。

---


### 3.1 IP协议

**IPv4地址：**

```python
def ip_to_binary(ip):
    """IP转二进制"""
    parts = ip.split('.')
    binary = ''.join(format(int(p), '08b') for p in parts)
    return binary

def cidr_to_netmask(cidr):
    """CIDR转子网掩码"""
    bits = '1' * cidr + '0' * (32 - cidr)
    return '.'.join(str(int(bits[i:i+8], 2)) for i in range(0, 32, 8))

print(ip_to_binary('192.168.1.1'))
print(cidr_to_netmask(24))  # 255.255.255.0
```

### 3.2 路由算法

#### Dijkstra算法

```python
import heapq

def dijkstra(graph, start):
    """最短路径算法"""
    distances = {node: float('inf') for node in graph}
    distances[start] = 0
    pq = [(0, start)]
    visited = set()
    
    while pq:
        dist, node = heapq.heappop(pq)
        
        if node in visited:
            continue
        
        visited.add(node)
        
        for neighbor, weight in graph[node].items():
            new_dist = dist + weight
            if new_dist < distances[neighbor]:
                distances[neighbor] = new_dist
                heapq.heappush(pq, (new_dist, neighbor))
    
    return distances

# 示例
graph = {
    'A': {'B': 1, 'C': 4},
    'B': {'A': 1, 'C': 2, 'D': 5},
    'C': {'A': 4, 'B': 2, 'D': 1},
    'D': {'B': 5, 'C': 1}
}

print(dijkstra(graph, 'A'))
```

---

## 4. 数据链路层