# 计算机导论 - (六)计算机网络基础

学习计算机网络的基本原理和协议。

---


### 6.1 网络分类

**按范围分类：**

| 类型 | 全称 | 范围 | 示例 |
|------|------|------|------|
| PAN | 个人局域网 | 10米 | 蓝牙设备 |
| LAN | 局域网 | 1公里 | 校园网、家庭网 |
| MAN | 城域网 | 10公里 | 城市网络 |
| WAN | 广域网 | 100公里+ | 互联网 |

### 6.2 网络协议

#### OSI七层模型

| 层次 | 名称 | 功能 | 协议/设备 |
|------|------|------|-----------|
| 7 | 应用层 | 用户接口 | HTTP, FTP, SMTP |
| 6 | 表示层 | 数据格式转换 | JPEG, MPEG |
| 5 | 会话层 | 会话管理 | RPC, SQL |
| 4 | 传输层 | 端到端通信 | TCP, UDP |
| 3 | 网络层 | 路由选择 | IP, 路由器 |
| 2 | 数据链路层 | 帧传输 | Ethernet, 交换机 |
| 1 | 物理层 | 比特传输 | 网线, 光纤 |

#### TCP/IP四层模型

```
应用层（HTTP, FTP, SMTP）
    ↓
传输层（TCP, UDP）
    ↓
网络层（IP）
    ↓
网络接口层（Ethernet）
```

### 6.3 IP地址

**IPv4：**
- 32位，点分十进制
- 示例：`192.168.1.1`
- 地址数量：$2^{32} \approx 43$亿

**IPv6：**
- 128位，冒号十六进制
- 示例：`2001:0db8:85a3::8a2e:0370:7334`
- 地址数量：$2^{128}$（几乎无限）

**特殊IP：**

| IP地址 | 用途 |
|--------|------|
| 127.0.0.1 | 本地回环 |
| 0.0.0.0 | 默认路由 |
| 255.255.255.255 | 广播地址 |
| 192.168.x.x | 私有地址 |

### 6.4 网络安全

**常见威胁：**

| 威胁 | 描述 |
|------|------|
| 病毒 | 自我复制的恶意程序 |
| 木马 | 伪装成正常程序的恶意软件 |
| 钓鱼 | 欺骗用户提供敏感信息 |
| DDoS | 分布式拒绝服务攻击 |
| 中间人攻击 | 窃听或篡改通信 |

**防护措施：**
- 🔐 使用强密码
- 🔒 启用HTTPS加密
- 🛡️ 安装防病毒软件
- 🔄 定期更新系统
- 📧 警惕钓鱼邮件

### 6.5 网络应用实例

#### HTTP协议详解

**HTTP请求结构：**

```
GET /index.html HTTP/1.1
Host: www.example.com
User-Agent: Mozilla/5.0
Accept: text/html
```

**HTTP响应结构：**

```
HTTP/1.1 200 OK
Content-Type: text/html
Content-Length: 1234

<html>...</html>
```

**常见状态码：**

| 状态码 | 含义 | 说明 |
|--------|------|------|
| 200 | OK | 请求成功 |
| 301 | Moved Permanently | 永久重定向 |
| 404 | Not Found | 资源不存在 |
| 500 | Internal Server Error | 服务器错误 |
| 403 | Forbidden | 禁止访问 |

**HTTP vs HTTPS：**

| 特性 | HTTP | HTTPS |
|------|------|-------|
| 端口 | 80 | 443 |
| 安全性 | 不加密 | SSL/TLS加密 |
| 速度 | 快 | 稍慢（加密开销） |
| 证书 | 不需要 | 需要SSL证书 |

#### DNS域名解析

**解析流程：**

```
1. 用户访问 www.example.com
   ↓
2. 检查本地hosts文件
   ↓
3. 查询本地DNS缓存
   ↓
4. 向本地DNS服务器查询
   ↓
5. 递归/迭代查询根服务器
   ↓
6. 返回IP地址 93.184.216.34
   ↓
7. 浏览器连接该IP
```

**DNS记录类型：**

| 类型 | 用途 | 示例 |
|------|------|------|
| A | 域名→IPv4 | example.com → 93.184.216.34 |
| AAAA | 域名→IPv6 | example.com → 2001:... |
| CNAME | 别名 | www → example.com |
| MX | 邮件服务器 | mail.example.com |
| TXT | 文本信息 | SPF记录 |

#### 网络性能指标

**1. 延迟（Latency）**

$$
\text{RTT（往返时间）} = \text{发送时间} + \text{传播时间} + \text{处理时间} + \text{接收时间}
$$

**2. 带宽（Bandwidth）**

$$
\text{带宽} = \frac{\text{数据量}}{\text{时间}}
$$

**示例：**
下载100MB文件，用时10秒：

$$
\text{带宽} = \frac{100 \text{ MB}}{10 \text{ s}} = 10 \text{ MB/s} = 80 \text{ Mbps}
$$

**3. 吞吐量（Throughput）**

实际传输速率，通常小于带宽（受网络拥塞、协议开销影响）

### 6.6 网络协议深入

#### TCP vs UDP

**TCP（传输控制协议）：**

**特点：**
- ✅ 面向连接
- ✅ 可靠传输（重传机制）
- ✅ 流量控制
- ✅ 拥塞控制
- ❌ 开销大、速度慢

**三次握手：**

```
客户端                    服务器
  |                         |
  |------- SYN -------->    |  第1次握手
  |                         |
  |<----- SYN+ACK ------    |  第2次握手
  |                         |
  |------- ACK -------->    |  第3次握手
  |                         |
  |    建立连接成功          |
```

**四次挥手：**

```
客户端                    服务器
  |                         |
  |------- FIN -------->    |  第1次挥手
  |                         |
  |<------ ACK ---------    |  第2次挥手
  |                         |
  |<------ FIN ---------    |  第3次挥手
  |                         |
  |------- ACK -------->    |  第4次挥手
  |                         |
  |    连接关闭完成          |
```

**UDP（用户数据报协议）：**

**特点：**
- ✅ 无连接
- ✅ 速度快
- ✅ 开销小
- ❌ 不可靠（可能丢包）
- ❌ 无流量控制
- ❌ 乱序可能

**TCP vs UDP 详细对比：**

| 特性 | TCP | UDP |
|------|-----|-----|
| **连接性** | 面向连接（需建立连接） | 无连接（直接发送） |
| **可靠性** | 可靠（保证送达、顺序） | 不可靠（可能丢包、乱序） |
| **速度** | 较慢（握手、确认开销） | 快（无握手） |
| **头部大小** | 20字节 | 8字节 |
| **流量控制** | 有（滑动窗口） | 无 |
| **拥塞控制** | 有（慢启动、拥塞避免） | 无 |
| **应用场景** | 文件传输、网页浏览、邮件 | 视频直播、语音通话、游戏 |
| **典型协议** | HTTP/HTTPS, FTP, SMTP | DNS, DHCP, SNMP |
| **是否有序** | 保证顺序 | 不保证顺序 |
| **适用情况** | 数据准确性重要 | 速度比准确性重要 |

**实际应用选择：**

```
文件下载：TCP
- 需要确保每个字节都正确
- 容许一定延迟
- 示例：HTTP下载、FTP传输

视频直播：UDP
- 偶尔丢包可接受（画面卡顿）
- 延迟影响体验
- 示例：Twitch直播、Zoom视频

在线游戏：UDP（多数）
- 低延迟是关键
- 旧位置信息可丢弃
- 示例：CS:GO、王者荣耀

网页浏览：TCP（HTTP/HTTPS）
- 需要完整页面内容
- 几百毫秒延迟可接受

DNS查询：UDP
- 查询数据小（通常<512字节）
- 快速响应优先
- 失败可重试
```

#### 应用层协议深入

**主要应用层协议对比：**

| 协议 | 端口 | 用途 | 传输层 | 特点 |
|------|------|------|--------|------|
| **HTTP** | 80 | 网页浏览 | TCP | 无状态、明文 |
| **HTTPS** | 443 | 安全网页 | TCP | 加密（TLS/SSL） |
| **FTP** | 20, 21 | 文件传输 | TCP | 双端口、明文 |
| **SFTP** | 22 | 安全文件传输 | TCP | 基于SSH |
| **SMTP** | 25 | 邮件发送 | TCP | 推送邮件 |
| **POP3** | 110 | 邮件接收 | TCP | 下载后删除 |
| **IMAP** | 143 | 邮件接收 | TCP | 服务器同步 |
| **DNS** | 53 | 域名解析 | UDP/TCP | UDP优先 |
| **DHCP** | 67, 68 | IP地址分配 | UDP | 自动配置 |
| **SSH** | 22 | 远程登录 | TCP | 加密shell |
| **Telnet** | 23 | 远程登录 | TCP | 明文（已弃用） |
| **RDP** | 3389 | 远程桌面 | TCP | Windows远程 |

**HTTP版本演进：**

| 版本 | 年份 | 主要特性 | 性能提升 |
|------|------|----------|----------|
| **HTTP/0.9** | 1991 | 仅支持GET | 基础功能 |
| **HTTP/1.0** | 1996 | 增加HEAD、POST等 | 多种请求类型 |
| **HTTP/1.1** | 1997 | 持久连接、管道化 | 减少连接开销 |
| **HTTP/2** | 2015 | 多路复用、头部压缩、服务器推送 | 2-3倍速度提升 |
| **HTTP/3** | 2022 | 基于QUIC（UDP） | 更低延迟 |

**HTTP/1.1 vs HTTP/2 vs HTTP/3：**

```
HTTP/1.1:
- 每个请求需要单独TCP连接（或串行）
- 头部重复传输
- 易出现队头阻塞

HTTP/2:
- 单个TCP连接，多路复用
- 头部压缩（HPACK）
- 服务器可主动推送资源
- 但仍有TCP层队头阻塞

HTTP/3:
- 基于QUIC（UDP）
- 完全消除队头阻塞
- 连接迁移（网络切换不断）
- 0-RTT连接恢复
```

**应用场景对比：**

| 应用 | 协议 | 原因 |
|------|------|------|
| Web浏览 | TCP | 需要可靠传输 |
| 文件传输 | TCP | 数据完整性重要 |
| 视频直播 | UDP | 实时性优先 |
| 在线游戏 | UDP | 低延迟需求 |
| DNS查询 | UDP | 数据量小，快速响应 |

---

## 7. 新兴技术与发展趋势