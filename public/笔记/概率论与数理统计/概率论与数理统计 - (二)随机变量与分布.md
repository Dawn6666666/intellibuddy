![(二)随机变量与分布](https://via.placeholder.com/800x200?text=Random+Variables)

# 概率论与数理统计 - (二)随机变量与分布

掌握离散和连续随机变量的分布。

---


### 2.1 离散型随机变量

**二项分布** $X \sim B(n, p)$：

$$
P(X = k) = \binom{n}{k} p^k (1-p)^{n-k}
$$

$$
E[X] = np, \quad \text{Var}(X) = np(1-p)
$$

**泊松分布** $X \sim \text{Poisson}(\lambda)$：

$$
P(X = k) = \frac{\lambda^k e^{-\lambda}}{k!}
$$

$$
E[X] = \lambda, \quad \text{Var}(X) = \lambda
$$

```python
from scipy import stats
import matplotlib.pyplot as plt

def plot_distributions():
    """可视化常见分布"""
    fig, axes = plt.subplots(2, 2, figsize=(12, 10))
    
    # 二项分布
    n, p = 20, 0.5
    x = np.arange(0, n+1)
    axes[0, 0].bar(x, stats.binom.pmf(x, n, p))
    axes[0, 0].set_title(f'二项分布 B({n}, {p})')
    axes[0, 0].set_xlabel('k')
    axes[0, 0].set_ylabel('P(X=k)')
    
    # 泊松分布
    lambda_ = 5
    x = np.arange(0, 20)
    axes[0, 1].bar(x, stats.poisson.pmf(x, lambda_))
    axes[0, 1].set_title(f'泊松分布 Poisson({lambda_})')
    axes[0, 1].set_xlabel('k')
    axes[0, 1].set_ylabel('P(X=k)')
    
    # 正态分布
    x = np.linspace(-4, 4, 1000)
    axes[1, 0].plot(x, stats.norm.pdf(x, 0, 1))
    axes[1, 0].set_title('标准正态分布 N(0, 1)')
    axes[1, 0].set_xlabel('x')
    axes[1, 0].set_ylabel('f(x)')
    axes[1, 0].grid()
    
    # 指数分布
    x = np.linspace(0, 5, 1000)
    axes[1, 1].plot(x, stats.expon.pdf(x, scale=1))
    axes[1, 1].set_title('指数分布 Exp(1)')
    axes[1, 1].set_xlabel('x')
    axes[1, 1].set_ylabel('f(x)')
    axes[1, 1].grid()
    
    plt.tight_layout()
    plt.show()

plot_distributions()
```

### 2.2 连续型随机变量

**正态分布** $X \sim N(\mu, \sigma^2)$：

$$
f(x) = \frac{1}{\sqrt{2\pi\sigma^2}} e^{-\frac{(x-\mu)^2}{2\sigma^2}}
$$

**标准正态分布**：$\mu = 0, \sigma = 1$

**3σ原则：**
- $P(|X - \mu| \leq \sigma) \approx 0.68$
- $P(|X - \mu| \leq 2\sigma) \approx 0.95$
- $P(|X - \mu| \leq 3\sigma) \approx 0.997$

**指数分布**（等待时间）：

$$
f(x) = \lambda e^{-\lambda x}, \quad x \geq 0
$$

$$
E[X] = \frac{1}{\lambda}, \quad \text{Var}(X) = \frac{1}{\lambda^2}
$$

**应用：网络请求到达建模**

```python
def simulate_server_queue(arrival_rate=5, service_rate=8, duration=100):
    """
    模拟服务器队列（泊松到达，指数服务时间）
    arrival_rate: 平均每秒到达请求数（λ）
    service_rate: 平均每秒处理请求数（μ）
    """
    current_time = 0
    queue = []
    wait_times = []
    
    # 生成到达时间（指数分布间隔）
    inter_arrival_times = np.random.exponential(1/arrival_rate, int(duration * arrival_rate * 2))
    arrival_times = np.cumsum(inter_arrival_times)
    
    # 生成服务时间
    service_times = np.random.exponential(1/service_rate, len(arrival_times))
    
    for i, arrival_time in enumerate(arrival_times):
        if arrival_time > duration:
            break
        
        # 处理队列
        while queue and queue[0] <= arrival_time:
            current_time = queue.pop(0)
        
        # 计算等待时间
        if queue:
            wait_start = queue[-1]
        else:
            wait_start = arrival_time
        
        wait_time = wait_start - arrival_time
        wait_times.append(max(0, wait_time))
        
        # 添加到队列
        service_end = wait_start + service_times[i]
        queue.append(service_end)
    
    avg_wait = np.mean(wait_times)
    theoretical_wait = 1 / (service_rate - arrival_rate)  # M/M/1队列公式
    
    print(f"平均等待时间（模拟）: {avg_wait:.4f}秒")
    print(f"理论等待时间: {theoretical_wait:.4f}秒")
    print(f"最大等待时间: {max(wait_times):.4f}秒")
    
    return wait_times

wait_times = simulate_server_queue()
```

---

## 3. 多维随机变量