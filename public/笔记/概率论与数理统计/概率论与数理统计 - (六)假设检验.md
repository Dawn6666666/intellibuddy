![(六)假设检验](https://via.placeholder.com/800x200?text=Hypothesis+Testing)

# 概率论与数理统计 - (六)假设检验

掌握假设检验的基本方法。

---


### 6.1 基本概念

**原假设** $H_0$ vs **备择假设** $H_1$

**两类错误：**
- **I型错误**：拒绝真的 $H_0$（显著性水平 $\alpha$）
- **II型错误**：接受假的 $H_0$（$\beta$）

**p值**：在 $H_0$ 为真时，观察到当前或更极端结果的概率

### 6.2 t检验

**单样本t检验：**

$$
t = \frac{\bar{X} - \mu_0}{s / \sqrt{n}}
$$

**应用：A/B测试**

```python
def ab_test(control_data, treatment_data, alpha=0.05):
    """
    A/B测试（独立样本t检验）
    """
    # 描述性统计
    print("=== A/B测试结果 ===")
    print(f"对照组: n={len(control_data)}, mean={np.mean(control_data):.4f}, std={np.std(control_data, ddof=1):.4f}")
    print(f"实验组: n={len(treatment_data)}, mean={np.mean(treatment_data):.4f}, std={np.std(treatment_data, ddof=1):.4f}")
    
    # t检验
    t_stat, p_value = stats.ttest_ind(treatment_data, control_data)
    
    print(f"\nt统计量: {t_stat:.4f}")
    print(f"p值: {p_value:.4f}")
    
    if p_value < alpha:
        print(f"结论: 拒绝原假设（p < {alpha}），实验组与对照组有显著差异")
        effect_size = (np.mean(treatment_data) - np.mean(control_data)) / np.mean(control_data) * 100
        print(f"效应大小: {effect_size:.2f}%")
    else:
        print(f"结论: 不拒绝原假设（p ≥ {alpha}），无显著差异")
    
    # 可视化
    plt.figure(figsize=(10, 6))
    plt.boxplot([control_data, treatment_data], labels=['对照组', '实验组'])
    plt.ylabel('指标值')
    plt.title('A/B测试结果')
    plt.grid(axis='y')
    plt.show()

# 模拟A/B测试
np.random.seed(42)
control = np.random.normal(100, 15, 500)  # 对照组
treatment = np.random.normal(105, 15, 500)  # 实验组（提升5%）

ab_test(control, treatment)
```

### 6.3 卡方检验

**独立性检验：**

$$
\chi^2 = \sum_{i,j} \frac{(O_{ij} - E_{ij})^2}{E_{ij}}
$$

```python
def chi_square_test(contingency_table):
    """
    卡方独立性检验
    """
    chi2, p_value, dof, expected = stats.chi2_contingency(contingency_table)
    
    print("=== 卡方检验 ===")
    print(f"χ² 统计量: {chi2:.4f}")
    print(f"自由度: {dof}")
    print(f"p值: {p_value:.4f}")
    
    if p_value < 0.05:
        print("结论: 拒绝原假设，变量间存在关联")
    else:
        print("结论: 不拒绝原假设，变量间独立")
    
    print("\n观察频数:")
    print(contingency_table)
    print("\n期望频数:")
    print(expected)

# 示例：点击率与广告类型的关系
contingency_table = np.array([
    [150, 50],   # 广告A: 点击, 未点击
    [100, 100]   # 广告B: 点击, 未点击
])

chi_square_test(contingency_table)
```

---

## 7. 回归分析