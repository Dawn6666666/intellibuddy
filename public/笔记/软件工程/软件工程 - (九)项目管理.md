![(九)项目管理](https://via.placeholder.com/800x200?text=Project+Management)

# 软件工程 - (九)项目管理

学习软件项目管理。

---


### 9.1 甘特图

```python
from datetime import datetime, timedelta

class Task:
    """任务"""
    def __init__(self, name, start_date, duration_days, dependencies=None):
        self.name = name
        self.start_date = start_date
        self.duration = duration_days
        self.end_date = start_date + timedelta(days=duration_days)
        self.dependencies = dependencies or []
        self.progress = 0  # 0-100

class GanttChart:
    """甘特图"""
    def __init__(self, project_name):
        self.project_name = project_name
        self.tasks = []
    
    def add_task(self, task):
        self.tasks.append(task)
    
    def calculate_critical_path(self):
        """计算关键路径"""
        # 简化版：找最长路径
        max_duration = 0
        critical_tasks = []
        
        for task in self.tasks:
            total = task.duration
            for dep in task.dependencies:
                total += dep.duration
            
            if total > max_duration:
                max_duration = total
                critical_tasks = [task] + task.dependencies
        
        return critical_tasks, max_duration
    
    def display(self):
        """显示甘特图（文本版）"""
        print(f"\n{self.project_name} - 甘特图")
        print("="*80)
        
        for task in sorted(self.tasks, key=lambda t: t.start_date):
            start_day = (task.start_date - self.tasks[0].start_date).days
            bar = " " * start_day + "█" * task.duration
            progress_marker = f"[{task.progress}%]"
            
            print(f"{task.name:20} {bar:30} {progress_marker}")
        
        critical, duration = self.calculate_critical_path()
        print(f"\n关键路径总时长: {duration}天")

# 示例
gantt = GanttChart("电商系统开发")

task1 = Task("需求分析", datetime(2024, 1, 1), 5)
task2 = Task("数据库设计", datetime(2024, 1, 6), 3, [task1])
task3 = Task("前端开发", datetime(2024, 1, 9), 10, [task2])
task4 = Task("后端开发", datetime(2024, 1, 9), 12, [task2])
task5 = Task("集成测试", datetime(2024, 1, 21), 5, [task3, task4])

for task in [task1, task2, task3, task4, task5]:
    gantt.add_task(task)

task1.progress = 100
task2.progress = 80
task3.progress = 50

gantt.display()
```

### 9.2 风险管理

```python
class Risk:
    """风险项"""
    def __init__(self, description, probability, impact):
        self.description = description
        self.probability = probability  # 1-5
        self.impact = impact  # 1-5
        self.risk_score = probability * impact
        self.mitigation = ""
    
    def set_mitigation(self, mitigation):
        self.mitigation = mitigation

class RiskRegister:
    """风险登记册"""
    def __init__(self):
        self.risks = []
    
    def add_risk(self, risk):
        self.risks.append(risk)
    
    def get_top_risks(self, n=5):
        """获取Top N风险"""
        return sorted(self.risks, key=lambda r: r.risk_score, reverse=True)[:n]
    
    def display(self):
        """显示风险矩阵"""
        print("\n风险登记册（按风险值排序）")
        print("="*80)
        print(f"{'描述':30} | 概率 | 影响 | 风险值 | 缓解措施")
        print("-"*80)
        
        for risk in self.get_top_risks(10):
            level = "🔴高" if risk.risk_score >= 15 else "🟡中" if risk.risk_score >= 8 else "🟢低"
            print(f"{risk.description:30} | {risk.probability:4} | {risk.impact:4} | "
                  f"{level:4} | {risk.mitigation}")

# 示例
register = RiskRegister()

risk1 = Risk("核心开发人员离职", 3, 5)
risk1.set_mitigation("知识转移、文档化")

risk2 = Risk("需求频繁变更", 4, 4)
risk2.set_mitigation("敏捷开发、迭代交付")

risk3 = Risk("第三方API不稳定", 3, 4)
risk3.set_mitigation("本地缓存、降级方案")

register.add_risk(risk1)
register.add_risk(risk2)
register.add_risk(risk3)

register.display()
```

---

## 10. 代码质量管理