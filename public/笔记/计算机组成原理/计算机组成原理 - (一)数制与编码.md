![(一)数制与编码](https://via.placeholder.com/800x200?text=Number+Systems)

# 计算机组成原理 - (一)数制与编码

学习计算机中的数制表示和编码。

---

# 计算机组成原理

> 💡 **课程信息**
> - 学习时长：150小时
> - 难度等级：⭐⭐⭐⭐ (高)
> - 前置课程：数字逻辑、C语言
> - **理解计算机硬件工作原理**

---

## 📚 课程概述

### 冯·诺依曼体系结构

```
      输入设备
          ↓
   [  运算器  ] ←→ [  控制器  ]
       ↕              ↕
   [ 存储器 (内存) ]
          ↓
      输出设备
```

**五大部件：**
1. **运算器（ALU）**：算术逻辑运算
2. **控制器（CU）**：指令解码与控制
3. **存储器（Memory）**：数据与程序存储
4. **输入设备**：键盘、鼠标等
5. **输出设备**：显示器、打印机等

---

## 1. 数制与编码

### 1.1 进制转换

**十进制 ↔ 二进制：**

$$
(13)_{10} = (1101)_2 = 1 \times 2^3 + 1 \times 2^2 + 0 \times 2^1 + 1 \times 2^0
$$

**Python实现：**

```python
def dec_to_bin(n):
    """十进制转二进制"""
    if n == 0:
        return "0"
    binary = ""
    while n > 0:
        binary = str(n % 2) + binary
        n //= 2
    return binary

def bin_to_dec(binary):
    """二进制转十进制"""
    decimal = 0
    for i, bit in enumerate(reversed(binary)):
        decimal += int(bit) * (2 ** i)
    return decimal

print(dec_to_bin(13))  # "1101"
print(bin_to_dec("1101"))  # 13
```

### 1.2 有符号数表示

| 表示法 | +3 | -3 | 说明 |
|--------|----|----|------|
| 原码 | 0011 | 1011 | 符号位 + 数值 |
| 反码 | 0011 | 1100 | 负数：符号位不变，其余取反 |
| 补码 | 0011 | 1101 | 负数：反码+1 |

**补码优势**：统一加减运算

$$
3 + (-3) = 0011 + 1101 = 10000 = 0 \quad (\text{溢出位舍弃})
$$

```python
def to_twos_complement(num, bits=8):
    """转换为补码"""
    if num >= 0:
        return bin(num)[2:].zfill(bits)
    else:
        # 负数：先取绝对值，反码+1
        abs_val = abs(num)
        binary = bin(abs_val)[2:].zfill(bits)
        # 取反
        inverted = ''.join('1' if b == '0' else '0' for b in binary)
        # +1
        result = bin(int(inverted, 2) + 1)[2:].zfill(bits)
        return result

print(to_twos_complement(3))   # "00000011"
print(to_twos_complement(-3))  # "11111101"
```

### 1.3 浮点数表示（IEEE 754）

**单精度（32位）：**

```
符号位(1) | 指数位(8) | 尾数位(23)
   S     |     E      |      M
```

$$
\text{Value} = (-1)^S \times 1.M \times 2^{E-127}
$$

**示例：**$5.75_{10}$ 的表示

1. 转二进制：$5.75 = 101.11_2 = 1.0111 \times 2^2$
2. $S = 0$（正数）
3. $E = 2 + 127 = 129 = 10000001_2$
4. $M = 0111$ （补0至23位）

```python
import struct

def float_to_ieee754(num):
    """浮点数转IEEE 754"""
    # Python struct自动转换
    binary = ''.join(f'{c:08b}' for c in struct.pack('>f', num))
    sign = binary[0]
    exponent = binary[1:9]
    mantissa = binary[9:]
    
    print(f"Sign: {sign}")
    print(f"Exponent: {exponent} ({int(exponent, 2)})")
    print(f"Mantissa: {mantissa}")
    
    return binary

float_to_ieee754(5.75)
```

---

## 2. 运算器设计