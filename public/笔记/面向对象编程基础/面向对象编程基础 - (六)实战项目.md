![(å…­)å®æˆ˜é¡¹ç›®](https://via.placeholder.com/800x200?text=Practice+Projects)

# é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€ - (å…­)å®æˆ˜é¡¹ç›®

é€šè¿‡å¤§å‹é¡¹ç›®å·©å›ºOOPçŸ¥è¯†ã€‚

---


### é¡¹ç›®1ï¼šå›¾ä¹¦ç®¡ç†ç³»ç»Ÿ

**éœ€æ±‚åˆ†æï¼š**
- å›¾ä¹¦å¢åˆ æ”¹æŸ¥
- å€Ÿé˜…ç®¡ç†
- ç”¨æˆ·ç®¡ç†

**ç±»è®¾è®¡ï¼š**

```python
from datetime import datetime, timedelta

class Book:
    def __init__(self, isbn, title, author):
        self.isbn = isbn
        self.title = title
        self.author = author
        self.is_available = True

class User:
    def __init__(self, user_id, name):
        self.user_id = user_id
        self.name = name
        self.borrowed_books = []

class Library:
    def __init__(self):
        self.books = {}
        self.users = {}
        self.loans = []
    
    def add_book(self, book):
        self.books[book.isbn] = book
    
    def register_user(self, user):
        self.users[user.user_id] = user
    
    def borrow_book(self, user_id, isbn):
        if isbn in self.books and self.books[isbn].is_available:
            book = self.books[isbn]
            user = self.users[user_id]
            
            book.is_available = False
            user.borrowed_books.append(isbn)
            
            loan = {
                'user_id': user_id,
                'isbn': isbn,
                'borrow_date': datetime.now(),
                'return_date': None
            }
            self.loans.append(loan)
            return True
        return False
    
    def return_book(self, user_id, isbn):
        book = self.books[isbn]
        user = self.users[user_id]
        
        book.is_available = True
        user.borrowed_books.remove(isbn)
        
        for loan in self.loans:
            if loan['user_id'] == user_id and loan['isbn'] == isbn:
                loan['return_date'] = datetime.now()
                break
        return True

# ä½¿ç”¨
library = Library()
book1 = Book("123", "Pythonç¼–ç¨‹", "å¼ ä¸‰")
user1 = User("001", "æå››")

library.add_book(book1)
library.register_user(user1)
library.borrow_book("001", "123")
```

### é¡¹ç›®2ï¼šç”µå•†ç³»ç»Ÿ

**æ ¸å¿ƒç±»ï¼š**

```python
class Product:
    def __init__(self, product_id, name, price, stock):
        self.product_id = product_id
        self.name = name
        self.price = price
        self.stock = stock

class ShoppingCart:
    def __init__(self):
        self.items = []
    
    def add_item(self, product, quantity):
        self.items.append({
            'product': product,
            'quantity': quantity
        })
    
    def total(self):
        return sum(item['product'].price * item['quantity'] 
                   for item in self.items)

class Order:
    def __init__(self, order_id, customer, cart):
        self.order_id = order_id
        self.customer = customer
        self.items = cart.items
        self.total = cart.total()
        self.status = "pending"
    
    def process(self):
        self.status = "processing"
    
    def ship(self):
        self.status = "shipped"

class Customer:
    def __init__(self, customer_id, name, email):
        self.customer_id = customer_id
        self.name = name
        self.email = email
        self.orders = []
    
    def place_order(self, cart):
        order = Order(len(self.orders) + 1, self, cart)
        self.orders.append(order)
        return order
```

---

## è¯¾ç¨‹å¤§çº²

### ç¬¬ä¸€ç« ï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹æ¦‚è¿° (2å‘¨)

#### 1.1 ç¼–ç¨‹èŒƒå¼çš„æ¼”è¿›
- é¢å‘è¿‡ç¨‹ç¼–ç¨‹çš„å±€é™æ€§
- é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¼˜åŠ¿
- é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€çš„å‘å±•å†å²

#### 1.2 é¢å‘å¯¹è±¡çš„åŸºæœ¬æ¦‚å¿µ
- ç°å®ä¸–ç•Œçš„æŠ½è±¡
- å¯¹è±¡å’Œç±»çš„æ¦‚å¿µ
- é¢å‘å¯¹è±¡çš„ç‰¹å¾ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€

#### 1.3 é¢å‘å¯¹è±¡åˆ†æä¸è®¾è®¡
- é—®é¢˜åŸŸåˆ†æ
- å¯¹è±¡è¯†åˆ«æ–¹æ³•
- ç±»å›¾çš„åŸºæœ¬è¡¨ç¤º

**å®éªŒå†…å®¹**ï¼š
- åˆ†æç°å®ä¸–ç•Œä¸­çš„å¯¹è±¡å’Œç±»å…³ç³»
- ç»˜åˆ¶ç®€å•çš„ç±»å›¾

### ç¬¬äºŒç« ï¼šç±»ä¸å¯¹è±¡ (3å‘¨)

#### 2.1 ç±»çš„å®šä¹‰ä¸å®ç°
- ç±»çš„åŸºæœ¬ç»“æ„
- å±æ€§å’Œæ–¹æ³•çš„å®šä¹‰
- è®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦

#### 2.2 å¯¹è±¡çš„åˆ›å»ºä¸ä½¿ç”¨
- å¯¹è±¡çš„å®ä¾‹åŒ–è¿‡ç¨‹
- æ„é€ å‡½æ•°å’Œææ„å‡½æ•°
- å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ

#### 2.3 æˆå‘˜è®¿é—®ä¸ä¿¡æ¯éšè—
- å…¬æœ‰ã€ç§æœ‰ã€ä¿æŠ¤æˆå‘˜
- getterå’Œsetteræ–¹æ³•
- ä¿¡æ¯éšè—çš„é‡è¦æ€§

**å®éªŒå†…å®¹**ï¼š
- è®¾è®¡å’Œå®ç°åŸºæœ¬çš„ç±»
- åˆ›å»ºå’Œæ“ä½œå¯¹è±¡
- å®ç°æ•°æ®å°è£…

**å‚è€ƒèµ„æ–™**ï¼š
> ğŸ’¡ **æ‰©å±•å­¦ä¹ **: å¦‚éœ€äº†è§£Javaè¯­è¨€ä¸­ç±»ä¸å¯¹è±¡çš„å…·ä½“å®ç°ï¼Œå¯å‚è€ƒï¼š
> - [JavaSE æ ¸å¿ƒå†…å®¹ - é¢å‘å¯¹è±¡åŸºç¡€](../../../public/ç¬”è®°/JavaSE%20æ ¸å¿ƒå†…å®¹/JavaSE%20æ ¸å¿ƒå†…å®¹%20-%20JavaSE%20ç¬”è®°ï¼ˆä¸‰ï¼‰é¢å‘å¯¹è±¡åŸºç¡€.md)

### ç¬¬ä¸‰ç« ï¼šå°è£… (2å‘¨)

#### 3.1 å°è£…çš„æ¦‚å¿µä¸æ„ä¹‰
- æ•°æ®éšè—ä¸æ¥å£åˆ†ç¦»
- å°è£…çš„å¥½å¤„
- å°è£…çš„å®ç°æ–¹å¼

#### 3.2 è®¿é—®æ§åˆ¶æœºåˆ¶
- è®¿é—®æƒé™çš„å±‚æ¬¡
- åŒ…çš„æ¦‚å¿µå’Œä½¿ç”¨
- æ¨¡å—åŒ–è®¾è®¡

#### 3.3 å±æ€§å’Œæ–¹æ³•çš„è®¾è®¡
- å±æ€§çš„å°è£…ç­–ç•¥
- æ–¹æ³•çš„èŒè´£åˆ†é…
- å¸¸é‡å’Œé™æ€æˆå‘˜

**å®éªŒå†…å®¹**ï¼š
- å®ç°å®Œæ•´çš„æ•°æ®å°è£…
- è®¾è®¡åˆç†çš„ç±»æ¥å£
- ä½¿ç”¨åŒ…ç»„ç»‡ä»£ç 

### ç¬¬å››ç« ï¼šç»§æ‰¿ (3å‘¨)

#### 4.1 ç»§æ‰¿çš„åŸºæœ¬æ¦‚å¿µ
- ç»§æ‰¿å…³ç³»çš„å»ºç«‹
- çˆ¶ç±»å’Œå­ç±»
- ç»§æ‰¿çš„è¯­æ³•å’Œè¯­ä¹‰

#### 4.2 ç»§æ‰¿çš„å®ç°æœºåˆ¶
- æˆå‘˜çš„ç»§æ‰¿è§„åˆ™
- æ„é€ å‡½æ•°çš„è°ƒç”¨é“¾
- æ–¹æ³•çš„é‡å†™å’Œé‡è½½

#### 4.3 ç»§æ‰¿å±‚æ¬¡çš„è®¾è®¡
- å•ç»§æ‰¿ä¸å¤šç»§æ‰¿
- æŠ½è±¡ç±»çš„ä½¿ç”¨
- ç»§æ‰¿ä¸ç»„åˆçš„é€‰æ‹©

**å®éªŒå†…å®¹**ï¼š
- è®¾è®¡ç±»ç»§æ‰¿å±‚æ¬¡
- å®ç°æ–¹æ³•é‡å†™
- ä½¿ç”¨æŠ½è±¡ç±»

### ç¬¬äº”ç« ï¼šå¤šæ€ (3å‘¨)

#### 5.1 å¤šæ€çš„æ¦‚å¿µä¸ç±»å‹
- ç¼–è¯‘æ—¶å¤šæ€ä¸è¿è¡Œæ—¶å¤šæ€
- æ–¹æ³•é‡è½½ä¸æ–¹æ³•é‡å†™
- å¤šæ€çš„å®ç°æœºåˆ¶

#### 5.2 è™šå‡½æ•°ä¸åŠ¨æ€ç»‘å®š
- è™šå‡½æ•°è¡¨çš„æ¦‚å¿µ
- åŠ¨æ€ç»‘å®šçš„è¿‡ç¨‹
- å¤šæ€çš„æ€§èƒ½è€ƒè™‘

#### 5.3 æ¥å£ä¸å¤šæ€
- æ¥å£çš„å®šä¹‰å’Œå®ç°
- æ¥å£ä¸æŠ½è±¡ç±»çš„åŒºåˆ«
- å¤šé‡ç»§æ‰¿çš„æ›¿ä»£æ–¹æ¡ˆ

**å®éªŒå†…å®¹**ï¼š
- å®ç°å¤šæ€æœºåˆ¶
- è®¾è®¡å’Œä½¿ç”¨æ¥å£
- æ¯”è¾ƒä¸åŒå¤šæ€å®ç°æ–¹å¼

### ç¬¬å…­ç« ï¼šé«˜çº§ç‰¹æ€§ (2å‘¨)

#### 6.1 æ³›å‹ç¼–ç¨‹
- æ³›å‹çš„æ¦‚å¿µå’Œæ„ä¹‰
- æ³›å‹ç±»å’Œæ³›å‹æ–¹æ³•
- ç±»å‹å‚æ•°çš„çº¦æŸ

#### 6.2 å¼‚å¸¸å¤„ç†
- å¼‚å¸¸çš„æ¦‚å¿µå’Œåˆ†ç±»
- å¼‚å¸¸å¤„ç†æœºåˆ¶
- è‡ªå®šä¹‰å¼‚å¸¸ç±»

#### 6.3 å†…éƒ¨ç±»å’ŒåµŒå¥—ç±»
- å†…éƒ¨ç±»çš„ç±»å‹å’Œç”¨é€”
- åŒ¿åç±»çš„ä½¿ç”¨
- å±€éƒ¨ç±»å’Œé™æ€åµŒå¥—ç±»

**å®éªŒå†…å®¹**ï¼š
- ä½¿ç”¨æ³›å‹æé«˜ä»£ç å¤ç”¨æ€§
- å®ç°å¼‚å¸¸å¤„ç†æœºåˆ¶
- è®¾è®¡å†…éƒ¨ç±»

### ç¬¬ä¸ƒç« ï¼šè®¾è®¡æ¨¡å¼å…¥é—¨ (1å‘¨)

#### 7.1 è®¾è®¡æ¨¡å¼æ¦‚è¿°
- è®¾è®¡æ¨¡å¼çš„æ¦‚å¿µ
- å¸¸è§è®¾è®¡æ¨¡å¼åˆ†ç±»
- è®¾è®¡æ¨¡å¼çš„ä½œç”¨

#### 7.2 åŸºç¡€è®¾è®¡æ¨¡å¼
- å•ä¾‹æ¨¡å¼
- å·¥å‚æ¨¡å¼
- è§‚å¯Ÿè€…æ¨¡å¼

**å®éªŒå†…å®¹**ï¼š
- å®ç°åŸºæœ¬è®¾è®¡æ¨¡å¼
- åˆ†æè®¾è®¡æ¨¡å¼çš„åº”ç”¨åœºæ™¯

## å®éªŒå®‰æ’

### å®éªŒä¸€ï¼šç±»ä¸å¯¹è±¡åŸºç¡€ (ç¬¬3å‘¨)
**ç›®æ ‡**: æŒæ¡ç±»çš„å®šä¹‰å’Œå¯¹è±¡çš„åˆ›å»º
**å†…å®¹**: 
- è®¾è®¡å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç±»
- å®ç°åŸºæœ¬çš„å¢åˆ æ”¹æŸ¥æ“ä½œ
- éªŒè¯å°è£…æ€§

### å®éªŒäºŒï¼šç»§æ‰¿ä¸å¤šæ€ (ç¬¬7å‘¨)
**ç›®æ ‡**: ç†è§£ç»§æ‰¿æœºåˆ¶å’Œå¤šæ€ç‰¹æ€§
**å†…å®¹**:
- è®¾è®¡å›¾å½¢ç±»å±‚æ¬¡ç»“æ„
- å®ç°ä¸åŒå›¾å½¢çš„é¢ç§¯è®¡ç®—
- ä½¿ç”¨å¤šæ€æœºåˆ¶ç»Ÿä¸€å¤„ç†

### å®éªŒä¸‰ï¼šæ¥å£ä¸æŠ½è±¡ç±» (ç¬¬10å‘¨)
**ç›®æ ‡**: æŒæ¡æ¥å£å’ŒæŠ½è±¡ç±»çš„ä½¿ç”¨
**å†…å®¹**:
- è®¾è®¡åŠ¨ç‰©ç±»å±‚æ¬¡
- ä½¿ç”¨æ¥å£å®šä¹‰è¡Œä¸º
- å®ç°å¤šé‡ç»§æ‰¿æ•ˆæœ

### å®éªŒå››ï¼šç»¼åˆé¡¹ç›® (ç¬¬14å‘¨)
**ç›®æ ‡**: ç»¼åˆè¿ç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹æŠ€æœ¯
**å†…å®¹**:
- è®¾è®¡ç®€å•çš„å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ
- ä½¿ç”¨é¢å‘å¯¹è±¡æ–¹æ³•åˆ†æå’Œè®¾è®¡
- å®ç°å®Œæ•´çš„ç³»ç»ŸåŠŸèƒ½

## è¯¾ç¨‹é¡¹ç›®

### é¡¹ç›®1ï¼šå›¾ä¹¦ç®¡ç†ç³»ç»Ÿï¼ˆåŸºç¡€é¡¹ç›®ï¼‰

**é¡¹ç›®ç›®æ ‡**ï¼šå®ç°ä¸€ä¸ªç®€å•çš„å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿï¼ŒæŒæ¡OOPåŸºç¡€æ¦‚å¿µã€‚

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- å›¾ä¹¦çš„æ·»åŠ ã€åˆ é™¤ã€æŸ¥è¯¢
- ç”¨æˆ·å€Ÿé˜…ã€å½’è¿˜å›¾ä¹¦
- å›¾ä¹¦åˆ†ç±»ç®¡ç†
- å€Ÿé˜…è®°å½•ç»Ÿè®¡

**å®Œæ•´ä»£ç ç¤ºä¾‹ï¼ˆPythonç‰ˆï¼‰**ï¼š

```python
from datetime import datetime, timedelta
from typing import List, Optional

# åŸºç¡€ç±»ï¼šå›¾ä¹¦
class Book:
    """å›¾ä¹¦åŸºç±»"""
    def __init__(self, book_id: str, title: str, author: str, isbn: str):
        self.book_id = book_id
        self.title = title
        self.author = author
        self.isbn = isbn
        self.is_borrowed = False
        self.borrow_date = None
        self.return_date = None
    
    def __str__(self):
        status = "å·²å€Ÿå‡º" if self.is_borrowed else "å¯å€Ÿé˜…"
        return f"[{self.book_id}] {self.title} - {self.author} ({status})"
    
    def borrow(self):
        """å€Ÿå‡ºå›¾ä¹¦"""
        if self.is_borrowed:
            return False
        self.is_borrowed = True
        self.borrow_date = datetime.now()
        self.return_date = self.borrow_date + timedelta(days=30)
        return True
    
    def return_book(self):
        """å½’è¿˜å›¾ä¹¦"""
        if not self.is_borrowed:
            return False
        self.is_borrowed = False
        self.borrow_date = None
        self.return_date = None
        return True

# ç»§æ‰¿ï¼šä¸åŒç±»å‹çš„å›¾ä¹¦
class TextBook(Book):
    """æ•™æç±»"""
    def __init__(self, book_id: str, title: str, author: str, isbn: str, 
                 subject: str, grade: int):
        super().__init__(book_id, title, author, isbn)
        self.subject = subject
        self.grade = grade
    
    def __str__(self):
        return f"[æ•™æ] {super().__str__()} - {self.subject} {self.grade}å¹´çº§"

class NovelBook(Book):
    """å°è¯´ç±»"""
    def __init__(self, book_id: str, title: str, author: str, isbn: str, 
                 genre: str):
        super().__init__(book_id, title, author, isbn)
        self.genre = genre
    
    def __str__(self):
        return f"[å°è¯´] {super().__str__()} - {self.genre}ç±»"

class TechnicalBook(Book):
    """æŠ€æœ¯ä¹¦ç±ç±»"""
    def __init__(self, book_id: str, title: str, author: str, isbn: str, 
                 technology: str, level: str):
        super().__init__(book_id, title, author, isbn)
        self.technology = technology
        self.level = level
    
    def __str__(self):
        return f"[æŠ€æœ¯] {super().__str__()} - {self.technology} ({self.level})"

# ç”¨æˆ·ç±»
class User:
    """ç”¨æˆ·åŸºç±»"""
    def __init__(self, user_id: str, name: str, email: str):
        self.user_id = user_id
        self.name = name
        self.email = email
        self.borrowed_books: List[Book] = []
        self.max_books = 5  # é»˜è®¤æœ€å¤šå€Ÿ5æœ¬
    
    def can_borrow(self) -> bool:
        """æ£€æŸ¥æ˜¯å¦å¯ä»¥å€Ÿä¹¦"""
        return len(self.borrowed_books) < self.max_books
    
    def borrow_book(self, book: Book) -> bool:
        """å€Ÿé˜…å›¾ä¹¦"""
        if not self.can_borrow():
            print(f"{self.name} å·²è¾¾åˆ°å€Ÿé˜…ä¸Šé™ï¼")
            return False
        
        if book.borrow():
            self.borrowed_books.append(book)
            print(f"{self.name} æˆåŠŸå€Ÿé˜…ï¼š{book.title}")
            return True
        else:
            print(f"{book.title} å·²è¢«å€Ÿå‡ºï¼")
            return False
    
    def return_book(self, book: Book) -> bool:
        """å½’è¿˜å›¾ä¹¦"""
        if book in self.borrowed_books:
            book.return_book()
            self.borrowed_books.remove(book)
            print(f"{self.name} æˆåŠŸå½’è¿˜ï¼š{book.title}")
            return True
        else:
            print(f"{self.name} æœªå€Ÿé˜…æ­¤ä¹¦ï¼")
            return False
    
    def list_borrowed_books(self):
        """åˆ—å‡ºå·²å€Ÿå›¾ä¹¦"""
        if not self.borrowed_books:
            print(f"{self.name} å½“å‰æ— å€Ÿé˜…å›¾ä¹¦")
        else:
            print(f"\n{self.name} çš„å€Ÿé˜…è®°å½•ï¼š")
            for book in self.borrowed_books:
                print(f"  - {book}")

# ç»§æ‰¿ï¼šä¸åŒç±»å‹çš„ç”¨æˆ·
class StudentUser(User):
    """å­¦ç”Ÿç”¨æˆ·"""
    def __init__(self, user_id: str, name: str, email: str, student_id: str, major: str):
        super().__init__(user_id, name, email)
        self.student_id = student_id
        self.major = major
        self.max_books = 10  # å­¦ç”Ÿå¯å€Ÿ10æœ¬

class TeacherUser(User):
    """æ•™å¸ˆç”¨æˆ·"""
    def __init__(self, user_id: str, name: str, email: str, department: str):
        super().__init__(user_id, name, email)
        self.department = department
        self.max_books = 20  # æ•™å¸ˆå¯å€Ÿ20æœ¬

# å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿï¼ˆç»„åˆæ¨¡å¼ï¼‰
class Library:
    """å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿ"""
    def __init__(self, name: str):
        self.name = name
        self.books: List[Book] = []
        self.users: List[User] = []
    
    def add_book(self, book: Book):
        """æ·»åŠ å›¾ä¹¦"""
        self.books.append(book)
        print(f"æˆåŠŸæ·»åŠ å›¾ä¹¦ï¼š{book.title}")
    
    def add_user(self, user: User):
        """æ·»åŠ ç”¨æˆ·"""
        self.users.append(user)
        print(f"æˆåŠŸæ·»åŠ ç”¨æˆ·ï¼š{user.name}")
    
    def search_book(self, keyword: str) -> List[Book]:
        """æœç´¢å›¾ä¹¦"""
        results = []
        for book in self.books:
            if (keyword.lower() in book.title.lower() or 
                keyword.lower() in book.author.lower()):
                results.append(book)
        return results
    
    def list_available_books(self):
        """åˆ—å‡ºå¯å€Ÿé˜…å›¾ä¹¦"""
        print(f"\n{self.name} - å¯å€Ÿé˜…å›¾ä¹¦ï¼š")
        available = [book for book in self.books if not book.is_borrowed]
        if not available:
            print("  æš‚æ— å¯å€Ÿé˜…å›¾ä¹¦")
        else:
            for book in available:
                print(f"  {book}")
    
    def generate_report(self):
        """ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š"""
        total_books = len(self.books)
        borrowed_books = sum(1 for book in self.books if book.is_borrowed)
        available_books = total_books - borrowed_books
        
        print(f"\n{'='*50}")
        print(f"{self.name} - ç»Ÿè®¡æŠ¥å‘Š")
        print(f"{'='*50}")
        print(f"å›¾ä¹¦æ€»æ•°ï¼š{total_books}")
        print(f"å·²å€Ÿå‡ºï¼š{borrowed_books}")
        print(f"å¯å€Ÿé˜…ï¼š{available_books}")
        print(f"æ³¨å†Œç”¨æˆ·ï¼š{len(self.users)}")
        print(f"{'='*50}\n")

# ä½¿ç”¨ç¤ºä¾‹
def main():
    # åˆ›å»ºå›¾ä¹¦é¦†
    library = Library("è®¡ç®—æœºå­¦é™¢å›¾ä¹¦é¦†")
    
    # æ·»åŠ å›¾ä¹¦
    book1 = TextBook("B001", "æ•°æ®ç»“æ„ä¸ç®—æ³•", "ä¸¥è”šæ•", "978-7-115-1", "è®¡ç®—æœº", 2)
    book2 = NovelBook("B002", "ä¸‰ä½“", "åˆ˜æ…ˆæ¬£", "978-7-229-2", "ç§‘å¹»")
    book3 = TechnicalBook("B003", "æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ", "Bryant", "978-7-111-3", "ç³»ç»Ÿç¼–ç¨‹", "è¿›é˜¶")
    
    library.add_book(book1)
    library.add_book(book2)
    library.add_book(book3)
    
    # æ·»åŠ ç”¨æˆ·
    student = StudentUser("U001", "å¼ ä¸‰", "zhangsan@email.com", "2021001", "è®¡ç®—æœºç§‘å­¦")
    teacher = TeacherUser("U002", "æè€å¸ˆ", "li@email.com", "è®¡ç®—æœºç³»")
    
    library.add_user(student)
    library.add_user(teacher)
    
    # æŸ¥çœ‹å¯å€Ÿé˜…å›¾ä¹¦
    library.list_available_books()
    
    # å­¦ç”Ÿå€Ÿä¹¦
    student.borrow_book(book1)
    student.borrow_book(book2)
    
    # æ•™å¸ˆå€Ÿä¹¦
    teacher.borrow_book(book2)  # å°è¯•å€Ÿå·²è¢«å€Ÿå‡ºçš„ä¹¦
    teacher.borrow_book(book3)
    
    # æŸ¥çœ‹å€Ÿé˜…è®°å½•
    student.list_borrowed_books()
    teacher.list_borrowed_books()
    
    # æŸ¥çœ‹å¯å€Ÿé˜…å›¾ä¹¦
    library.list_available_books()
    
    # å½’è¿˜å›¾ä¹¦
    student.return_book(book1)
    
    # æœç´¢å›¾ä¹¦
    results = library.search_book("è®¡ç®—æœº")
    print(f"\næœç´¢'è®¡ç®—æœº'çš„ç»“æœï¼š")
    for book in results:
        print(f"  {book}")
    
    # ç”ŸæˆæŠ¥å‘Š
    library.generate_report()

if __name__ == "__main__":
    main()
```

**è¿è¡Œè¾“å‡º**ï¼š
```
æˆåŠŸæ·»åŠ å›¾ä¹¦ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•
æˆåŠŸæ·»åŠ å›¾ä¹¦ï¼šä¸‰ä½“
æˆåŠŸæ·»åŠ å›¾ä¹¦ï¼šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ
æˆåŠŸæ·»åŠ ç”¨æˆ·ï¼šå¼ ä¸‰
æˆåŠŸæ·»åŠ ç”¨æˆ·ï¼šæè€å¸ˆ

è®¡ç®—æœºå­¦é™¢å›¾ä¹¦é¦† - å¯å€Ÿé˜…å›¾ä¹¦ï¼š
  [æ•™æ] [B001] æ•°æ®ç»“æ„ä¸ç®—æ³• - ä¸¥è”šæ• (å¯å€Ÿé˜…) - è®¡ç®—æœº 2å¹´çº§
  [å°è¯´] [B002] ä¸‰ä½“ - åˆ˜æ…ˆæ¬£ (å¯å€Ÿé˜…) - ç§‘å¹»ç±»
  [æŠ€æœ¯] [B003] æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ - Bryant (å¯å€Ÿé˜…) - ç³»ç»Ÿç¼–ç¨‹ (è¿›é˜¶)

å¼ ä¸‰ æˆåŠŸå€Ÿé˜…ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•
å¼ ä¸‰ æˆåŠŸå€Ÿé˜…ï¼šä¸‰ä½“
ä¸‰ä½“ å·²è¢«å€Ÿå‡ºï¼
æè€å¸ˆ æˆåŠŸå€Ÿé˜…ï¼šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ

å¼ ä¸‰ çš„å€Ÿé˜…è®°å½•ï¼š
  - [æ•™æ] [B001] æ•°æ®ç»“æ„ä¸ç®—æ³• - ä¸¥è”šæ• (å·²å€Ÿå‡º) - è®¡ç®—æœº 2å¹´çº§
  - [å°è¯´] [B002] ä¸‰ä½“ - åˆ˜æ…ˆæ¬£ (å·²å€Ÿå‡º) - ç§‘å¹»ç±»

æè€å¸ˆ çš„å€Ÿé˜…è®°å½•ï¼š
  - [æŠ€æœ¯] [B003] æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ - Bryant (å·²å€Ÿå‡º) - ç³»ç»Ÿç¼–ç¨‹ (è¿›é˜¶)

è®¡ç®—æœºå­¦é™¢å›¾ä¹¦é¦† - å¯å€Ÿé˜…å›¾ä¹¦ï¼š
  æš‚æ— å¯å€Ÿé˜…å›¾ä¹¦

å¼ ä¸‰ æˆåŠŸå½’è¿˜ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•

æœç´¢'è®¡ç®—æœº'çš„ç»“æœï¼š
  [æ•™æ] [B001] æ•°æ®ç»“æ„ä¸ç®—æ³• - ä¸¥è”šæ• (å¯å€Ÿé˜…) - è®¡ç®—æœº 2å¹´çº§
  [æŠ€æœ¯] [B003] æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ - Bryant (å·²å€Ÿå‡º) - ç³»ç»Ÿç¼–ç¨‹ (è¿›é˜¶)

==================================================
è®¡ç®—æœºå­¦é™¢å›¾ä¹¦é¦† - ç»Ÿè®¡æŠ¥å‘Š
==================================================
å›¾ä¹¦æ€»æ•°ï¼š3
å·²å€Ÿå‡ºï¼š2
å¯å€Ÿé˜…ï¼š1
æ³¨å†Œç”¨æˆ·ï¼š2
==================================================
```

**é¡¹ç›®æ€»ç»“**ï¼š
- âœ… ä½¿ç”¨äº†**å°è£…**ï¼šç§æœ‰å±æ€§ï¼Œå…¬å…±æ–¹æ³•
- âœ… ä½¿ç”¨äº†**ç»§æ‰¿**ï¼šTextBookã€NovelBookç»§æ‰¿è‡ªBook
- âœ… ä½¿ç”¨äº†**å¤šæ€**ï¼šä¸åŒç±»å‹çš„Bookæœ‰ä¸åŒçš„__str__å®ç°
- âœ… ä½¿ç”¨äº†**ç»„åˆ**ï¼šLibraryåŒ…å«å¤šä¸ªBookå’ŒUser

---

### é¡¹ç›®2ï¼šå­¦ç”Ÿé€‰è¯¾ç³»ç»Ÿï¼ˆè¿›é˜¶é¡¹ç›®ï¼‰

**é¡¹ç›®è¦æ±‚**ï¼š
1. ä½¿ç”¨é¢å‘å¯¹è±¡æ–¹æ³•è¿›è¡Œç³»ç»Ÿåˆ†æå’Œè®¾è®¡
2. å®ç°å­¦ç”Ÿã€è¯¾ç¨‹ã€æ•™å¸ˆç­‰æ ¸å¿ƒç±»
3. æ”¯æŒé€‰è¯¾ã€é€€è¯¾ã€æˆç»©ç®¡ç†ç­‰åŠŸèƒ½
4. ä½¿ç”¨ç»§æ‰¿å’Œå¤šæ€æœºåˆ¶
5. åº”ç”¨è®¾è®¡æ¨¡å¼ï¼ˆå•ä¾‹ã€å·¥å‚ç­‰ï¼‰

**å®Œæ•´ä»£ç ç¤ºä¾‹ï¼ˆJavaç‰ˆï¼‰**ï¼š

```java
import java.util.*;

// è¯¾ç¨‹ç±»
class Course {
    private String courseId;
    private String courseName;
    private String teacher;
    private int capacity;
    private int enrolled;
    private List<Student> students;
    
    public Course(String courseId, String courseName, String teacher, int capacity) {
        this.courseId = courseId;
        this.courseName = courseName;
        this.teacher = teacher;
        this.capacity = capacity;
        this.enrolled = 0;
        this.students = new ArrayList<>();
    }
    
    public boolean addStudent(Student student) {
        if (enrolled >= capacity) {
            System.out.println("è¯¾ç¨‹å·²æ»¡ï¼");
            return false;
        }
        students.add(student);
        enrolled++;
        return true;
    }
    
    public boolean removeStudent(Student student) {
        if (students.remove(student)) {
            enrolled--;
            return true;
        }
        return false;
    }
    
    public String getCourseId() { return courseId; }
    public String getCourseName() { return courseName; }
    public int getEnrolled() { return enrolled; }
    public int getCapacity() { return capacity; }
    
    @Override
    public String toString() {
        return String.format("%s - %s (æ•™å¸ˆ: %s, å·²é€‰: %d/%d)", 
            courseId, courseName, teacher, enrolled, capacity);
    }
}

// å­¦ç”Ÿç±»
class Student {
    private String studentId;
    private String name;
    private String major;
    private List<Course> courses;
    private Map<String, Integer> grades;
    private static final int MAX_COURSES = 6;
    
    public Student(String studentId, String name, String major) {
        this.studentId = studentId;
        this.name = name;
        this.major = major;
        this.courses = new ArrayList<>();
        this.grades = new HashMap<>();
    }
    
    public boolean enrollCourse(Course course) {
        if (courses.size() >= MAX_COURSES) {
            System.out.println("å·²è¾¾åˆ°é€‰è¯¾ä¸Šé™ï¼");
            return false;
        }
        
        if (courses.contains(course)) {
            System.out.println("å·²é€‰è¿‡è¯¥è¯¾ç¨‹ï¼");
            return false;
        }
        
        if (course.addStudent(this)) {
            courses.add(course);
            System.out.println(name + " æˆåŠŸé€‰è¯¾ï¼š" + course.getCourseName());
            return true;
        }
        return false;
    }
    
    public boolean dropCourse(Course course) {
        if (courses.remove(course)) {
            course.removeStudent(this);
            grades.remove(course.getCourseId());
            System.out.println(name + " æˆåŠŸé€€è¯¾ï¼š" + course.getCourseName());
            return true;
        }
        System.out.println("æœªé€‰è¯¥è¯¾ç¨‹ï¼");
        return false;
    }
    
    public void setGrade(String courseId, int grade) {
        grades.put(courseId, grade);
    }
    
    public double calculateGPA() {
        if (grades.isEmpty()) return 0.0;
        int sum = 0;
        for (int grade : grades.values()) {
            sum += grade;
        }
        return (double) sum / grades.size();
    }
    
    public void printTranscript() {
        System.out.println("\nå­¦ç”Ÿï¼š" + name + " (" + studentId + ")");
        System.out.println("ä¸“ä¸šï¼š" + major);
        System.out.println("å·²é€‰è¯¾ç¨‹ï¼š");
        for (Course course : courses) {
            Integer grade = grades.get(course.getCourseId());
            String gradeStr = (grade != null) ? grade.toString() : "æœªå½•å…¥";
            System.out.println("  - " + course.getCourseName() + ": " + gradeStr);
        }
        System.out.println("å¹³å‡åˆ†ï¼š" + String.format("%.2f", calculateGPA()));
    }
    
    public String getStudentId() { return studentId; }
    public String getName() { return name; }
}

// é€‰è¯¾ç³»ç»Ÿï¼ˆå•ä¾‹æ¨¡å¼ï¼‰
class CourseSystem {
    private static CourseSystem instance;
    private List<Course> courses;
    private List<Student> students;
    
    private CourseSystem() {
        courses = new ArrayList<>();
        students = new ArrayList<>();
    }
    
    // å•ä¾‹æ¨¡å¼ï¼šè·å–å”¯ä¸€å®ä¾‹
    public static CourseSystem getInstance() {
        if (instance == null) {
            instance = new CourseSystem();
        }
        return instance;
    }
    
    public void addCourse(Course course) {
        courses.add(course);
        System.out.println("æ·»åŠ è¯¾ç¨‹ï¼š" + course.getCourseName());
    }
    
    public void addStudent(Student student) {
        students.add(student);
        System.out.println("æ·»åŠ å­¦ç”Ÿï¼š" + student.getName());
    }
    
    public Course findCourse(String courseId) {
        for (Course course : courses) {
            if (course.getCourseId().equals(courseId)) {
                return course;
            }
        }
        return null;
    }
    
    public Student findStudent(String studentId) {
        for (Student student : students) {
            if (student.getStudentId().equals(studentId)) {
                return student;
            }
        }
        return null;
    }
    
    public void listAllCourses() {
        System.out.println("\næ‰€æœ‰è¯¾ç¨‹ï¼š");
        for (Course course : courses) {
            System.out.println("  " + course);
        }
    }
    
    public void generateReport() {
        System.out.println("\n=== é€‰è¯¾ç³»ç»ŸæŠ¥å‘Š ===");
        System.out.println("è¯¾ç¨‹æ€»æ•°ï¼š" + courses.size());
        System.out.println("å­¦ç”Ÿæ€»æ•°ï¼š" + students.size());
        
        int totalEnrolled = 0;
        for (Course course : courses) {
            totalEnrolled += course.getEnrolled();
        }
        System.out.println("æ€»é€‰è¯¾äººæ¬¡ï¼š" + totalEnrolled);
    }
}

// ä¸»ç¨‹åº
public class CourseManagementSystem {
    public static void main(String[] args) {
        // è·å–é€‰è¯¾ç³»ç»Ÿå®ä¾‹ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰
        CourseSystem system = CourseSystem.getInstance();
        
        // æ·»åŠ è¯¾ç¨‹
        Course course1 = new Course("CS101", "æ•°æ®ç»“æ„", "å¼ è€å¸ˆ", 30);
        Course course2 = new Course("CS102", "ç®—æ³•è®¾è®¡", "æè€å¸ˆ", 25);
        Course course3 = new Course("MATH201", "ç¦»æ•£æ•°å­¦", "ç‹è€å¸ˆ", 40);
        
        system.addCourse(course1);
        system.addCourse(course2);
        system.addCourse(course3);
        
        // æ·»åŠ å­¦ç”Ÿ
        Student alice = new Student("2021001", "Alice", "è®¡ç®—æœºç§‘å­¦");
        Student bob = new Student("2021002", "Bob", "è½¯ä»¶å·¥ç¨‹");
        
        system.addStudent(alice);
        system.addStudent(bob);
        
        // æ˜¾ç¤ºæ‰€æœ‰è¯¾ç¨‹
        system.listAllCourses();
        
        // å­¦ç”Ÿé€‰è¯¾
        alice.enrollCourse(course1);
        alice.enrollCourse(course2);
        alice.enrollCourse(course3);
        
        bob.enrollCourse(course1);
        bob.enrollCourse(course2);
        
        // å½•å…¥æˆç»©
        alice.setGrade("CS101", 95);
        alice.setGrade("CS102", 88);
        alice.setGrade("MATH201", 92);
        
        bob.setGrade("CS101", 85);
        bob.setGrade("CS102", 90);
        
        // æ‰“å°æˆç»©å•
        alice.printTranscript();
        bob.printTranscript();
        
        // é€€è¯¾
        alice.dropCourse(course3);
        
        // ç”ŸæˆæŠ¥å‘Š
        system.generateReport();
        
        // æ˜¾ç¤ºæ›´æ–°åçš„è¯¾ç¨‹ä¿¡æ¯
        system.listAllCourses();
    }
}
```

**è¿è¡Œè¾“å‡º**ï¼š
```
æ·»åŠ è¯¾ç¨‹ï¼šæ•°æ®ç»“æ„
æ·»åŠ è¯¾ç¨‹ï¼šç®—æ³•è®¾è®¡
æ·»åŠ è¯¾ç¨‹ï¼šç¦»æ•£æ•°å­¦
æ·»åŠ å­¦ç”Ÿï¼šAlice
æ·»åŠ å­¦ç”Ÿï¼šBob

æ‰€æœ‰è¯¾ç¨‹ï¼š
  CS101 - æ•°æ®ç»“æ„ (æ•™å¸ˆ: å¼ è€å¸ˆ, å·²é€‰: 0/30)
  CS102 - ç®—æ³•è®¾è®¡ (æ•™å¸ˆ: æè€å¸ˆ, å·²é€‰: 0/25)
  MATH201 - ç¦»æ•£æ•°å­¦ (æ•™å¸ˆ: ç‹è€å¸ˆ, å·²é€‰: 0/40)

Alice æˆåŠŸé€‰è¯¾ï¼šæ•°æ®ç»“æ„
Alice æˆåŠŸé€‰è¯¾ï¼šç®—æ³•è®¾è®¡
Alice æˆåŠŸé€‰è¯¾ï¼šç¦»æ•£æ•°å­¦
Bob æˆåŠŸé€‰è¯¾ï¼šæ•°æ®ç»“æ„
Bob æˆåŠŸé€‰è¯¾ï¼šç®—æ³•è®¾è®¡

å­¦ç”Ÿï¼šAlice (2021001)
ä¸“ä¸šï¼šè®¡ç®—æœºç§‘å­¦
å·²é€‰è¯¾ç¨‹ï¼š
  - æ•°æ®ç»“æ„: 95
  - ç®—æ³•è®¾è®¡: 88
  - ç¦»æ•£æ•°å­¦: 92
å¹³å‡åˆ†ï¼š91.67

å­¦ç”Ÿï¼šBob (2021002)
ä¸“ä¸šï¼šè½¯ä»¶å·¥ç¨‹
å·²é€‰è¯¾ç¨‹ï¼š
  - æ•°æ®ç»“æ„: 85
  - ç®—æ³•è®¾è®¡: 90
å¹³å‡åˆ†ï¼š87.50

Alice æˆåŠŸé€€è¯¾ï¼šç¦»æ•£æ•°å­¦

=== é€‰è¯¾ç³»ç»ŸæŠ¥å‘Š ===
è¯¾ç¨‹æ€»æ•°ï¼š3
å­¦ç”Ÿæ€»æ•°ï¼š2
æ€»é€‰è¯¾äººæ¬¡ï¼š4

æ‰€æœ‰è¯¾ç¨‹ï¼š
  CS101 - æ•°æ®ç»“æ„ (æ•™å¸ˆ: å¼ è€å¸ˆ, å·²é€‰: 2/30)
  CS102 - ç®—æ³•è®¾è®¡ (æ•™å¸ˆ: æè€å¸ˆ, å·²é€‰: 2/25)
  MATH201 - ç¦»æ•£æ•°å­¦ (æ•™å¸ˆ: ç‹è€å¸ˆ, å·²é€‰: 0/40)
```

**é¡¹ç›®äº®ç‚¹**ï¼š
- âœ… **å•ä¾‹æ¨¡å¼**ï¼šCourseSystemç¡®ä¿å…¨å±€åªæœ‰ä¸€ä¸ªå®ä¾‹
- âœ… **å°è£…**ï¼šæ‰€æœ‰å±æ€§ç§æœ‰ï¼Œé€šè¿‡æ–¹æ³•è®¿é—®
- âœ… **ä¸šåŠ¡é€»è¾‘**ï¼šé€‰è¯¾é™åˆ¶ã€å®¹é‡æ£€æŸ¥
- âœ… **æ•°æ®ç®¡ç†**ï¼šæˆç»©å½•å…¥ã€GPAè®¡ç®—

---

### é¡¹ç›®3ï¼šåœ¨çº¿è´­ç‰©ç³»ç»Ÿï¼ˆç»¼åˆé¡¹ç›®ï¼‰

**é¡¹ç›®ç›®æ ‡**ï¼šå®ç°ä¸€ä¸ªç”µå•†ç³»ç»Ÿï¼Œç»¼åˆè¿ç”¨OOPæ‰€æœ‰ç‰¹æ€§å’Œè®¾è®¡æ¨¡å¼ã€‚

**ç³»ç»Ÿæ¶æ„**ï¼š
```
åœ¨çº¿è´­ç‰©ç³»ç»Ÿ
â”œâ”€â”€ ç”¨æˆ·æ¨¡å—ï¼ˆUser, Customer, Adminï¼‰
â”œâ”€â”€ å•†å“æ¨¡å—ï¼ˆProduct, Categoryï¼‰
â”œâ”€â”€ è´­ç‰©è½¦æ¨¡å—ï¼ˆShoppingCart, CartItemï¼‰
â”œâ”€â”€ è®¢å•æ¨¡å—ï¼ˆOrder, OrderItemï¼‰
â””â”€â”€ æ”¯ä»˜æ¨¡å—ï¼ˆPayment, ç­–ç•¥æ¨¡å¼ï¼‰
```

**æ ¸å¿ƒä»£ç ï¼ˆPythonå®ç°ï¼Œå±•ç¤ºå…³é”®éƒ¨åˆ†ï¼‰**ï¼š

```python
from abc import ABC, abstractmethod
from enum import Enum
from datetime import datetime
from typing import List, Dict

# æšä¸¾ï¼šè®¢å•çŠ¶æ€
class OrderStatus(Enum):
    PENDING = "å¾…æ”¯ä»˜"
    PAID = "å·²æ”¯ä»˜"
    SHIPPED = "å·²å‘è´§"
    DELIVERED = "å·²é€è¾¾"
    CANCELLED = "å·²å–æ¶ˆ"

# ç­–ç•¥æ¨¡å¼ï¼šæ”¯ä»˜ç­–ç•¥
class PaymentStrategy(ABC):
    @abstractmethod
    def pay(self, amount: float) -> bool:
        pass

class AlipayPayment(PaymentStrategy):
    def pay(self, amount: float) -> bool:
        print(f"ä½¿ç”¨æ”¯ä»˜å®æ”¯ä»˜ Â¥{amount:.2f}")
        return True

class WechatPayment(PaymentStrategy):
    def pay(self, amount: float) -> bool:
        print(f"ä½¿ç”¨å¾®ä¿¡æ”¯ä»˜ Â¥{amount:.2f}")
        return True

class CreditCardPayment(PaymentStrategy):
    def __init__(self, card_number: str):
        self.card_number = card_number
    
    def pay(self, amount: float) -> bool:
        print(f"ä½¿ç”¨ä¿¡ç”¨å¡ {self.card_number[-4:]} æ”¯ä»˜ Â¥{amount:.2f}")
        return True

# å•†å“ç±»
class Product:
    def __init__(self, product_id: str, name: str, price: float, 
                 stock: int, category: str):
        self.product_id = product_id
        self.name = name
        self.price = price
        self.stock = stock
        self.category = category
    
    def __str__(self):
        return f"{self.name} - Â¥{self.price:.2f} (åº“å­˜: {self.stock})"
    
    def reduce_stock(self, quantity: int) -> bool:
        if self.stock >= quantity:
            self.stock -= quantity
            return True
        return False
    
    def restore_stock(self, quantity: int):
        self.stock += quantity

# è´­ç‰©è½¦é¡¹
class CartItem:
    def __init__(self, product: Product, quantity: int):
        self.product = product
        self.quantity = quantity
    
    def get_subtotal(self) -> float:
        return self.product.price * self.quantity
    
    def __str__(self):
        return f"{self.product.name} x{self.quantity} = Â¥{self.get_subtotal():.2f}"

# è´­ç‰©è½¦
class ShoppingCart:
    def __init__(self):
        self.items: List[CartItem] = []
    
    def add_item(self, product: Product, quantity: int = 1):
        # æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
        for item in self.items:
            if item.product.product_id == product.product_id:
                item.quantity += quantity
                print(f"å·²æ›´æ–°è´­ç‰©è½¦ï¼š{product.name} x{item.quantity}")
                return
        
        # æ·»åŠ æ–°é¡¹
        self.items.append(CartItem(product, quantity))
        print(f"å·²æ·»åŠ åˆ°è´­ç‰©è½¦ï¼š{product.name} x{quantity}")
    
    def remove_item(self, product_id: str):
        self.items = [item for item in self.items 
                      if item.product.product_id != product_id]
    
    def get_total(self) -> float:
        return sum(item.get_subtotal() for item in self.items)
    
    def clear(self):
        self.items.clear()
    
    def display(self):
        if not self.items:
            print("è´­ç‰©è½¦ä¸ºç©º")
            return
        
        print("\nè´­ç‰©è½¦å†…å®¹ï¼š")
        for item in self.items:
            print(f"  {item}")
        print(f"æ€»è®¡ï¼šÂ¥{self.get_total():.2f}")

# è®¢å•é¡¹
class OrderItem:
    def __init__(self, product_name: str, price: float, quantity: int):
        self.product_name = product_name
        self.price = price
        self.quantity = quantity
    
    def get_subtotal(self) -> float:
        return self.price * self.quantity

# è®¢å•ç±»
class Order:
    _order_counter = 1000
    
    def __init__(self, customer_name: str):
        Order._order_counter += 1
        self.order_id = f"ORD{Order._order_counter}"
        self.customer_name = customer_name
        self.items: List[OrderItem] = []
        self.status = OrderStatus.PENDING
        self.created_at = datetime.now()
        self.total_amount = 0.0
    
    def add_item(self, product: Product, quantity: int):
        order_item = OrderItem(product.name, product.price, quantity)
        self.items.append(order_item)
        self.total_amount += order_item.get_subtotal()
    
    def pay(self, payment_strategy: PaymentStrategy) -> bool:
        if self.status != OrderStatus.PENDING:
            print("è®¢å•çŠ¶æ€ä¸å…è®¸æ”¯ä»˜")
            return False
        
        if payment_strategy.pay(self.total_amount):
            self.status = OrderStatus.PAID
            print(f"è®¢å• {self.order_id} æ”¯ä»˜æˆåŠŸï¼")
            return True
        return False
    
    def ship(self):
        if self.status == OrderStatus.PAID:
            self.status = OrderStatus.SHIPPED
            print(f"è®¢å• {self.order_id} å·²å‘è´§")
    
    def deliver(self):
        if self.status == OrderStatus.SHIPPED:
            self.status = OrderStatus.DELIVERED
            print(f"è®¢å• {self.order_id} å·²é€è¾¾")
    
    def cancel(self):
        if self.status in [OrderStatus.PENDING, OrderStatus.PAID]:
            self.status = OrderStatus.CANCELLED
            # æ¢å¤åº“å­˜
            for item in self.items:
                # è¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®é™…éœ€è¦é€šè¿‡äº§å“IDæ¢å¤
                pass
            print(f"è®¢å• {self.order_id} å·²å–æ¶ˆ")
    
    def display(self):
        print(f"\nè®¢å•å·ï¼š{self.order_id}")
        print(f"å®¢æˆ·ï¼š{self.customer_name}")
        print(f"çŠ¶æ€ï¼š{self.status.value}")
        print(f"åˆ›å»ºæ—¶é—´ï¼š{self.created_at.strftime('%Y-%m-%d %H:%M:%S')}")
        print("è®¢å•æ˜ç»†ï¼š")
        for item in self.items:
            print(f"  {item.product_name} x{item.quantity} = Â¥{item.get_subtotal():.2f}")
        print(f"è®¢å•æ€»é¢ï¼šÂ¥{self.total_amount:.2f}")

# ç”¨æˆ·ç±»ï¼ˆæŠ½è±¡åŸºç±»ï¼‰
class User(ABC):
    def __init__(self, user_id: str, username: str, email: str):
        self.user_id = user_id
        self.username = username
        self.email = email
    
    @abstractmethod
    def get_role(self) -> str:
        pass

# å®¢æˆ·ç±»
class Customer(User):
    def __init__(self, user_id: str, username: str, email: str, address: str):
        super().__init__(user_id, username, email)
        self.address = address
        self.cart = ShoppingCart()
        self.orders: List[Order] = []
    
    def get_role(self) -> str:
        return "é¡¾å®¢"
    
    def view_cart(self):
        self.cart.display()
    
    def checkout(self) -> Order:
        if not self.cart.items:
            print("è´­ç‰©è½¦ä¸ºç©ºï¼Œæ— æ³•ç»“è´¦")
            return None
        
        # åˆ›å»ºè®¢å•
        order = Order(self.username)
        
        # æ£€æŸ¥å¹¶æ‰£å‡åº“å­˜
        for cart_item in self.cart.items:
            if not cart_item.product.reduce_stock(cart_item.quantity):
                print(f"{cart_item.product.name} åº“å­˜ä¸è¶³")
                return None
            order.add_item(cart_item.product, cart_item.quantity)
        
        # æ¸…ç©ºè´­ç‰©è½¦
        self.cart.clear()
        self.orders.append(order)
        
        print(f"è®¢å•åˆ›å»ºæˆåŠŸï¼š{order.order_id}")
        return order
    
    def view_orders(self):
        if not self.orders:
            print("æš‚æ— è®¢å•")
            return
        
        print(f"\n{self.username} çš„è®¢å•åˆ—è¡¨ï¼š")
        for order in self.orders:
            print(f"  {order.order_id} - {order.status.value} - Â¥{order.total_amount:.2f}")

# ç®¡ç†å‘˜ç±»
class Admin(User):
    def get_role(self) -> str:
        return "ç®¡ç†å‘˜"
    
    def add_product(self, store, product: Product):
        store.add_product(product)
        print(f"ç®¡ç†å‘˜æ·»åŠ å•†å“ï¼š{product.name}")
    
    def view_all_orders(self, customers: List[Customer]):
        print("\næ‰€æœ‰è®¢å•ï¼š")
        for customer in customers:
            for order in customer.orders:
                print(f"  {order.order_id} - {customer.username} - {order.status.value}")

# å•†åº—ç±»ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰
class OnlineStore:
    _instance = None
    
    def __new__(cls):
        if cls._instance is None:
            cls._instance = super().__new__(cls)
            cls._instance.products = []
            cls._instance.customers = []
        return cls._instance
    
    def add_product(self, product: Product):
        self.products.append(product)
    
    def search_product(self, keyword: str) -> List[Product]:
        return [p for p in self.products 
                if keyword.lower() in p.name.lower()]
    
    def display_products(self):
        print("\nå•†å“åˆ—è¡¨ï¼š")
        for product in self.products:
            print(f"  {product}")

# ä¸»ç¨‹åºæ¼”ç¤º
def main():
    # åˆ›å»ºå•†åº—ï¼ˆå•ä¾‹ï¼‰
    store = OnlineStore()
    
    # æ·»åŠ å•†å“
    p1 = Product("P001", "iPhone 15", 5999.0, 50, "æ‰‹æœº")
    p2 = Product("P002", "MacBook Pro", 12999.0, 30, "ç”µè„‘")
    p3 = Product("P003", "AirPods Pro", 1999.0, 100, "è€³æœº")
    
    store.add_product(p1)
    store.add_product(p2)
    store.add_product(p3)
    
    # æ˜¾ç¤ºå•†å“
    store.display_products()
    
    # åˆ›å»ºå®¢æˆ·
    customer = Customer("C001", "å¼ ä¸‰", "zhangsan@email.com", "åŒ—äº¬å¸‚æœé˜³åŒº")
    
    # è´­ç‰©æµç¨‹
    customer.cart.add_item(p1, 2)
    customer.cart.add_item(p3, 1)
    customer.view_cart()
    
    # ç»“è´¦
    order = customer.checkout()
    
    if order:
        order.display()
        
        # æ”¯ä»˜ï¼ˆç­–ç•¥æ¨¡å¼ï¼‰
        payment = AlipayPayment()
        order.pay(payment)
        
        # å‘è´§
        order.ship()
        order.deliver()
    
    # æŸ¥çœ‹è®¢å•
    customer.view_orders()
    
    # å†æ¬¡è´­ç‰©ï¼Œä½¿ç”¨ä¸åŒæ”¯ä»˜æ–¹å¼
    customer.cart.add_item(p2, 1)
    order2 = customer.checkout()
    
    if order2:
        # ä½¿ç”¨ä¿¡ç”¨å¡æ”¯ä»˜
        credit_card = CreditCardPayment("1234-5678-9012-3456")
        order2.pay(credit_card)
        order2.display()

if __name__ == "__main__":
    main()
```

**è¿è¡Œè¾“å‡º**ï¼ˆéƒ¨åˆ†ï¼‰ï¼š
```
å•†å“åˆ—è¡¨ï¼š
  iPhone 15 - Â¥5999.00 (åº“å­˜: 50)
  MacBook Pro - Â¥12999.00 (åº“å­˜: 30)
  AirPods Pro - Â¥1999.00 (åº“å­˜: 100)

å·²æ·»åŠ åˆ°è´­ç‰©è½¦ï¼šiPhone 15 x2
å·²æ·»åŠ åˆ°è´­ç‰©è½¦ï¼šAirPods Pro x1

è´­ç‰©è½¦å†…å®¹ï¼š
  iPhone 15 x2 = Â¥11998.00
  AirPods Pro x1 = Â¥1999.00
æ€»è®¡ï¼šÂ¥13997.00

è®¢å•åˆ›å»ºæˆåŠŸï¼šORD1001

è®¢å•å·ï¼šORD1001
å®¢æˆ·ï¼šå¼ ä¸‰
çŠ¶æ€ï¼šå¾…æ”¯ä»˜
åˆ›å»ºæ—¶é—´ï¼š2025-10-13 14:30:25
è®¢å•æ˜ç»†ï¼š
  iPhone 15 x2 = Â¥11998.00
  AirPods Pro x1 = Â¥1999.00
è®¢å•æ€»é¢ï¼šÂ¥13997.00

ä½¿ç”¨æ”¯ä»˜å®æ”¯ä»˜ Â¥13997.00
è®¢å• ORD1001 æ”¯ä»˜æˆåŠŸï¼
è®¢å• ORD1001 å·²å‘è´§
è®¢å• ORD1001 å·²é€è¾¾

å¼ ä¸‰ çš„è®¢å•åˆ—è¡¨ï¼š
  ORD1001 - å·²é€è¾¾ - Â¥13997.00
```

**é¡¹ç›®ç‰¹ç‚¹**ï¼š
- âœ… **å¤šç§è®¾è®¡æ¨¡å¼**ï¼šå•ä¾‹ã€ç­–ç•¥ã€æŠ½è±¡å·¥å‚
- âœ… **å®Œæ•´ä¸šåŠ¡æµç¨‹**ï¼šæµè§ˆâ†’åŠ è´­â†’ç»“è´¦â†’æ”¯ä»˜â†’å‘è´§
- âœ… **é¢å‘å¯¹è±¡ç‰¹æ€§**ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€ã€æŠ½è±¡
- âœ… **å®é™…åº”ç”¨ä»·å€¼**ï¼šå¯æ‰©å±•ä¸ºçœŸå®ç”µå•†ç³»ç»Ÿ

**è¯„åˆ†æ ‡å‡†**ï¼š
- éœ€æ±‚åˆ†æå’Œç³»ç»Ÿè®¾è®¡ (30%)
- ä»£ç å®ç°è´¨é‡ (40%)
- åŠŸèƒ½å®Œæ•´æ€§ (20%)
- æ–‡æ¡£å’Œæ¼”ç¤º (10%)

## è€ƒæ ¸æ–¹å¼

- **å¹³æ—¶æˆç»©** (30%): å‡ºå‹¤ã€ä½œä¸šã€å®éªŒæŠ¥å‘Š
- **æœŸä¸­è€ƒè¯•** (30%): ç†è®ºçŸ¥è¯†å’ŒåŸºç¡€ç¼–ç¨‹
- **æœŸæœ«é¡¹ç›®** (40%): ç»¼åˆé¡¹ç›®è®¾è®¡ä¸å®ç°

## æ•™æä¸å‚è€ƒèµ„æ–™

### ä¸»è¦æ•™æ
1. ã€Šé¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡åŸºç¡€ã€‹- æ¸…åå¤§å­¦å‡ºç‰ˆç¤¾
2. ã€Šè®¾è®¡æ¨¡å¼ï¼šå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ã€‹- æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾

### å‚è€ƒèµ„æ–™
1. ã€Šé‡æ„ï¼šæ”¹å–„æ—¢æœ‰ä»£ç çš„è®¾è®¡ã€‹- äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾
2. ã€Šä»£ç å¤§å…¨ã€‹- ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾
3. ã€ŠEffective Javaã€‹- æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾

### åœ¨çº¿èµ„æº
- [é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™è¯¦è§£](https://refactoring.guru/design-patterns)
- [UMLç±»å›¾ç»˜åˆ¶æŒ‡å—](https://www.visual-paradigm.com/guide/uml-unified-modeling-language/what-is-class-diagram/)

## ğŸ› å¸¸è§Bugä¸è°ƒè¯•æŠ€å·§

### å¸¸è§OOPç¼–ç¨‹é”™è¯¯

#### 1. å¿˜è®°è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°

**é”™è¯¯ç¤ºä¾‹ï¼ˆPythonï¼‰**ï¼š
```python
class Animal:
    def __init__(self, name):
        self.name = name

class Dog(Animal):
    def __init__(self, name, breed):
        # å¿˜è®°è°ƒç”¨super().__init__()
        self.breed = breed  # é”™è¯¯ï¼šself.nameæœªåˆå§‹åŒ–
```

**æ­£ç¡®åšæ³•**ï¼š
```python
class Dog(Animal):
    def __init__(self, name, breed):
        super().__init__(name)  # æ­£ç¡®ï¼šå…ˆè°ƒç”¨çˆ¶ç±»æ„é€ 
        self.breed = breed
```

#### 2. å¯å˜é»˜è®¤å‚æ•°é™·é˜±

**é”™è¯¯ç¤ºä¾‹**ï¼š
```python
class ShoppingCart:
    def __init__(self, items=[]):  # å±é™©ï¼
        self.items = items

cart1 = ShoppingCart()
cart1.items.append("Apple")

cart2 = ShoppingCart()
print(cart2.items)  # è¾“å‡ºï¼š['Apple'] - æ„å¤–ï¼
```

**æ­£ç¡®åšæ³•**ï¼š
```python
class ShoppingCart:
    def __init__(self, items=None):
        self.items = items if items is not None else []
```

#### 3. å¾ªç¯å¼•ç”¨å¯¼è‡´å†…å­˜æ³„æ¼

**é—®é¢˜ä»£ç **ï¼š
```python
class Node:
    def __init__(self, value):
        self.value = value
        self.parent = None
        self.children = []
    
    def add_child(self, child):
        child.parent = self  # ç›¸äº’å¼•ç”¨
        self.children.append(child)
```

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨å¼±å¼•ç”¨
```python
import weakref

class Node:
    def __init__(self, value):
        self.value = value
        self._parent = None
        self.children = []
    
    @property
    def parent(self):
        return self._parent() if self._parent else None
    
    @parent.setter
    def parent(self, value):
        self._parent = weakref.ref(value) if value else None
```

#### 4. å¤šæ€æ–¹æ³•ç­¾åä¸ä¸€è‡´

**é”™è¯¯ç¤ºä¾‹ï¼ˆJavaï¼‰**ï¼š
```java
class Shape {
    public double area() {
        return 0;
    }
}

class Rectangle extends Shape {
    // é”™è¯¯ï¼šå‚æ•°ä¸åŒï¼Œä¸æ˜¯é‡å†™è€Œæ˜¯é‡è½½
    public double area(double width, double height) {
        return width * height;
    }
}
```

**æ­£ç¡®åšæ³•**ï¼š
```java
class Rectangle extends Shape {
    private double width, height;
    
    public Rectangle(double width, double height) {
        this.width = width;
        this.height = height;
    }
    
    @Override
    public double area() {  // æ­£ç¡®ï¼šç­¾åä¸€è‡´
        return width * height;
    }
}
```

#### 5. å¿˜è®°å®ç°æŠ½è±¡æ–¹æ³•

**é”™è¯¯ç¤ºä¾‹**ï¼š
```python
from abc import ABC, abstractmethod

class Vehicle(ABC):
    @abstractmethod
    def start(self):
        pass
    
    @abstractmethod
    def stop(self):
        pass

class Car(Vehicle):
    def start(self):
        print("Car started")
    # å¿˜è®°å®ç°stop() - è¿è¡Œæ—¶é”™è¯¯ï¼

# car = Car()  # TypeError: Can't instantiate abstract class
```

**æ­£ç¡®åšæ³•**ï¼š
```python
class Car(Vehicle):
    def start(self):
        print("Car started")
    
    def stop(self):  # å¿…é¡»å®ç°æ‰€æœ‰æŠ½è±¡æ–¹æ³•
        print("Car stopped")
```

### è°ƒè¯•æŠ€å·§

#### 1. ä½¿ç”¨`__repr__`æ–¹ä¾¿è°ƒè¯•

```python
class Student:
    def __init__(self, name, age, gpa):
        self.name = name
        self.age = age
        self.gpa = gpa
    
    def __repr__(self):
        return f"Student(name='{self.name}', age={self.age}, gpa={self.gpa})"
    
    def __str__(self):
        return f"{self.name} ({self.age}å², GPA: {self.gpa})"

s = Student("Alice", 20, 3.8)
print(s)         # è¾“å‡ºï¼šAlice (20å², GPA: 3.8)
print(repr(s))   # è¾“å‡ºï¼šStudent(name='Alice', age=20, gpa=3.8)
print([s])       # è¾“å‡ºï¼š[Student(name='Alice', age=20, gpa=3.8)]
```

#### 2. ä½¿ç”¨æ–­ç‚¹å’Œæ—¥å¿—

```python
import logging

logging.basicConfig(level=logging.DEBUG)

class BankAccount:
    def __init__(self, balance):
        self.balance = balance
        self.logger = logging.getLogger(__name__)
    
    def withdraw(self, amount):
        self.logger.debug(f"å°è¯•å–æ¬¾: {amount}, å½“å‰ä½™é¢: {self.balance}")
        
        if amount > self.balance:
            self.logger.warning(f"ä½™é¢ä¸è¶³ï¼éœ€è¦ {amount}, ä»…æœ‰ {self.balance}")
            return False
        
        self.balance -= amount
        self.logger.info(f"å–æ¬¾æˆåŠŸ: {amount}, å‰©ä½™: {self.balance}")
        return True

account = BankAccount(1000)
account.withdraw(500)   # DEBUG: å°è¯•å–æ¬¾: 500, å½“å‰ä½™é¢: 1000
                        # INFO: å–æ¬¾æˆåŠŸ: 500, å‰©ä½™: 500
account.withdraw(800)   # WARNING: ä½™é¢ä¸è¶³ï¼éœ€è¦ 800, ä»…æœ‰ 500
```

#### 3. å•å…ƒæµ‹è¯•

```python
import unittest

class Rectangle:
    def __init__(self, width, height):
        self.width = width
        self.height = height
    
    def area(self):
        return self.width * self.height
    
    def perimeter(self):
        return 2 * (self.width + self.height)

class TestRectangle(unittest.TestCase):
    def setUp(self):
        self.rect = Rectangle(4, 5)
    
    def test_area(self):
        self.assertEqual(self.rect.area(), 20)
    
    def test_perimeter(self):
        self.assertEqual(self.rect.perimeter(), 18)
    
    def test_negative_dimensions(self):
        with self.assertRaises(ValueError):
            rect = Rectangle(-1, 5)

if __name__ == '__main__':
    unittest.main()
```

---

## ğŸ’¡ OOPæœ€ä½³å®è·µ

### 1. SOLIDåŸåˆ™è¯¦è§£

#### S - å•ä¸€èŒè´£åŸåˆ™ï¼ˆSingle Responsibilityï¼‰

**åä¾‹**ï¼š
```python
class User:
    def __init__(self, name, email):
        self.name = name
        self.email = email
    
    # èŒè´£1ï¼šç”¨æˆ·æ•°æ®ç®¡ç†
    def update_email(self, new_email):
        self.email = new_email
    
    # èŒè´£2ï¼šæ•°æ®åº“æ“ä½œï¼ˆä¸åº”è¯¥åœ¨è¿™é‡Œï¼‰
    def save_to_database(self):
        # æ•°æ®åº“æ“ä½œ...
        pass
    
    # èŒè´£3ï¼šé‚®ä»¶å‘é€ï¼ˆä¸åº”è¯¥åœ¨è¿™é‡Œï¼‰
    def send_email(self, message):
        # å‘é€é‚®ä»¶...
        pass
```

**æ­£ç¡®åšæ³•**ï¼š
```python
class User:
    """åªè´Ÿè´£ç”¨æˆ·æ•°æ®"""
    def __init__(self, name, email):
        self.name = name
        self.email = email
    
    def update_email(self, new_email):
        self.email = new_email

class UserRepository:
    """åªè´Ÿè´£æ•°æ®åº“æ“ä½œ"""
    def save(self, user: User):
        # ä¿å­˜åˆ°æ•°æ®åº“
        pass
    
    def find(self, user_id):
        # ä»æ•°æ®åº“æŸ¥è¯¢
        pass

class EmailService:
    """åªè´Ÿè´£é‚®ä»¶å‘é€"""
    def send(self, to_email, message):
        # å‘é€é‚®ä»¶
        pass
```

#### O - å¼€é—­åŸåˆ™ï¼ˆOpen/Closedï¼‰

**ç¤ºä¾‹ï¼šæ”¯ä»˜ç³»ç»Ÿ**ï¼š
```python
from abc import ABC, abstractmethod

# å¯¹æ‰©å±•å¼€æ”¾
class PaymentProcessor(ABC):
    @abstractmethod
    def process(self, amount: float):
        pass

# åŸºç¡€å®ç°
class CreditCardPayment(PaymentProcessor):
    def process(self, amount: float):
        print(f"ä¿¡ç”¨å¡æ”¯ä»˜ ${amount}")

class PayPalPayment(PaymentProcessor):
    def process(self, amount: float):
        print(f"PayPalæ”¯ä»˜ ${amount}")

# æ–°å¢æ”¯ä»˜æ–¹å¼ï¼ˆæ‰©å±•ï¼‰- ä¸éœ€è¦ä¿®æ”¹ç°æœ‰ä»£ç 
class CryptoPayment(PaymentProcessor):
    def process(self, amount: float):
        print(f"åŠ å¯†è´§å¸æ”¯ä»˜ ${amount}")

# ä½¿ç”¨
def checkout(payment: PaymentProcessor, amount: float):
    payment.process(amount)

checkout(CreditCardPayment(), 100)
checkout(CryptoPayment(), 50)  # æ–°å¢çš„æ–¹å¼æ— ç¼æ¥å…¥
```

#### L - é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLiskov Substitutionï¼‰

**åä¾‹**ï¼š
```python
class Bird:
    def fly(self):
        print("é£ç¿”")

class Penguin(Bird):
    def fly(self):
        raise Exception("ä¼é¹…ä¸ä¼šé£ï¼")  # è¿åLSP
```

**æ­£ç¡®åšæ³•**ï¼š
```python
class Bird:
    def move(self):
        pass

class FlyingBird(Bird):
    def move(self):
        self.fly()
    
    def fly(self):
        print("é£ç¿”")

class Penguin(Bird):
    def move(self):
        self.swim()
    
    def swim(self):
        print("æ¸¸æ³³")

# å¯ä»¥å®‰å…¨æ›¿æ¢
def let_bird_move(bird: Bird):
    bird.move()

let_bird_move(FlyingBird())  # é£ç¿”
let_bird_move(Penguin())     # æ¸¸æ³³
```

#### I - æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregationï¼‰

**åä¾‹**ï¼š
```python
class Worker(ABC):
    @abstractmethod
    def work(self):
        pass
    
    @abstractmethod
    def eat(self):
        pass
    
    @abstractmethod
    def sleep(self):
        pass

class Robot(Worker):  # æœºå™¨äººä¸éœ€è¦eatå’Œsleep
    def work(self):
        print("å·¥ä½œ")
    
    def eat(self):
        pass  # ä¸éœ€è¦ä½†å¿…é¡»å®ç°
    
    def sleep(self):
        pass  # ä¸éœ€è¦ä½†å¿…é¡»å®ç°
```

**æ­£ç¡®åšæ³•**ï¼š
```python
class Workable(ABC):
    @abstractmethod
    def work(self):
        pass

class Eatable(ABC):
    @abstractmethod
    def eat(self):
        pass

class Sleepable(ABC):
    @abstractmethod
    def sleep(self):
        pass

class Human(Workable, Eatable, Sleepable):
    def work(self):
        print("å·¥ä½œ")
    
    def eat(self):
        print("åƒé¥­")
    
    def sleep(self):
        print("ç¡è§‰")

class Robot(Workable):  # åªå®ç°éœ€è¦çš„æ¥å£
    def work(self):
        print("å·¥ä½œ")
```

#### D - ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDependency Inversionï¼‰

**åä¾‹**ï¼š
```python
class MySQLDatabase:
    def save(self, data):
        print(f"ä¿å­˜åˆ°MySQL: {data}")

class UserService:
    def __init__(self):
        self.db = MySQLDatabase()  # ä¾èµ–å…·ä½“å®ç°
    
    def save_user(self, user):
        self.db.save(user)
```

**æ­£ç¡®åšæ³•**ï¼š
```python
class Database(ABC):
    @abstractmethod
    def save(self, data):
        pass

class MySQLDatabase(Database):
    def save(self, data):
        print(f"ä¿å­˜åˆ°MySQL: {data}")

class MongoDatabase(Database):
    def save(self, data):
        print(f"ä¿å­˜åˆ°MongoDB: {data}")

class UserService:
    def __init__(self, db: Database):  # ä¾èµ–æŠ½è±¡
        self.db = db
    
    def save_user(self, user):
        self.db.save(user)

# çµæ´»åˆ‡æ¢å®ç°
service1 = UserService(MySQLDatabase())
service2 = UserService(MongoDatabase())
```

### 2. ç»„åˆä¼˜äºç»§æ‰¿

**ç»§æ‰¿çš„é—®é¢˜ï¼ˆå¤šå±‚ç»§æ‰¿å¯¼è‡´å¤æ‚ï¼‰**ï¼š
```python
class Employee:
    def work(self):
        print("å·¥ä½œ")

class Manager(Employee):
    def manage(self):
        print("ç®¡ç†")

class Engineer(Employee):
    def code(self):
        print("ç¼–ç¨‹")

# å¦‚æœéœ€è¦æ—¢æ˜¯ç»ç†åˆæ˜¯å·¥ç¨‹å¸ˆï¼Ÿå¤šé‡ç»§æ‰¿ä¼šå¾ˆå¤æ‚
```

**ç»„åˆçš„è§£å†³æ–¹æ¡ˆ**ï¼š
```python
class WorkCapability:
    def work(self):
        print("å·¥ä½œ")

class ManageCapability:
    def manage(self):
        print("ç®¡ç†")

class CodeCapability:
    def code(self):
        print("ç¼–ç¨‹")

class Employee:
    def __init__(self):
        self.capabilities = []
    
    def add_capability(self, capability):
        self.capabilities.append(capability)
    
    def perform_tasks(self):
        for cap in self.capabilities:
            for method in dir(cap):
                if not method.startswith('_'):
                    getattr(cap, method)()

# çµæ´»ç»„åˆ
emp = Employee()
emp.add_capability(WorkCapability())
emp.add_capability(ManageCapability())
emp.add_capability(CodeCapability())
emp.perform_tasks()  # å·¥ä½œã€ç®¡ç†ã€ç¼–ç¨‹
```

### 3. å‘½åè§„èŒƒ

| ç±»å‹ | Python | Java | ç¤ºä¾‹ |
|------|--------|------|------|
| ç±»å | PascalCase | PascalCase | `UserAccount`, `ShoppingCart` |
| æ–¹æ³•å | snake_case | camelCase | `get_balance()`, `getBalance()` |
| å¸¸é‡ | UPPER_CASE | UPPER_CASE | `MAX_SIZE`, `DEFAULT_TIMEOUT` |
| ç§æœ‰æˆå‘˜ | _leading_underscore | privateå…³é”®å­— | `_internal_data` |
| æŠ½è±¡ç±» | Baseæˆ–Abstractå‰ç¼€ | Abstractå‰ç¼€ | `BaseRepository`, `AbstractFactory` |

### 4. æ–‡æ¡£å­—ç¬¦ä¸²

```python
class BankAccount:
    """é“¶è¡Œè´¦æˆ·ç±»
    
    ç”¨äºç®¡ç†ç”¨æˆ·çš„é“¶è¡Œè´¦æˆ·ï¼ŒåŒ…æ‹¬å­˜æ¬¾ã€å–æ¬¾ã€æŸ¥è¯¢ä½™é¢ç­‰åŠŸèƒ½ã€‚
    
    Attributes:
        account_id (str): è´¦æˆ·ID
        balance (float): è´¦æˆ·ä½™é¢
        owner (str): è´¦æˆ·æ‰€æœ‰è€…
    
    Examples:
        >>> account = BankAccount("A001", "Alice", 1000)
        >>> account.deposit(500)
        True
        >>> account.get_balance()
        1500.0
    """
    
    def __init__(self, account_id: str, owner: str, balance: float = 0):
        """åˆå§‹åŒ–é“¶è¡Œè´¦æˆ·
        
        Args:
            account_id: è´¦æˆ·ID
            owner: è´¦æˆ·æ‰€æœ‰è€…å§“å
            balance: åˆå§‹ä½™é¢ï¼Œé»˜è®¤ä¸º0
        
        Raises:
            ValueError: å¦‚æœåˆå§‹ä½™é¢ä¸ºè´Ÿæ•°
        """
        if balance < 0:
            raise ValueError("åˆå§‹ä½™é¢ä¸èƒ½ä¸ºè´Ÿæ•°")
        
        self.account_id = account_id
        self.owner = owner
        self.balance = balance
    
    def deposit(self, amount: float) -> bool:
        """å­˜æ¬¾
        
        Args:
            amount: å­˜æ¬¾é‡‘é¢
        
        Returns:
            bool: å­˜æ¬¾æ˜¯å¦æˆåŠŸ
        
        Examples:
            >>> account.deposit(100)
            True
        """
        if amount <= 0:
            return False
        self.balance += amount
        return True
```

---

## å­¦ä¹ å»ºè®®

1. **ç†è®ºä¸å®è·µç»“åˆ**
   - æ¯å­¦ä¹ ä¸€ä¸ªæ¦‚å¿µéƒ½è¦é€šè¿‡ç¼–ç¨‹å®è·µåŠ æ·±ç†è§£
   - å¤šåˆ†æç°å®ä¸–ç•Œä¸­çš„å¯¹è±¡å…³ç³»

2. **å¾ªåºæ¸è¿›**
   - å…ˆæŒæ¡åŸºæœ¬æ¦‚å¿µï¼Œå†å­¦ä¹ é«˜çº§ç‰¹æ€§
   - ä¸è¦æ€¥äºå­¦ä¹ å¤æ‚çš„è®¾è®¡æ¨¡å¼

3. **å¤šåšç»ƒä¹ **
   - å®Œæˆæ‰€æœ‰å®éªŒå’Œä½œä¸š
   - å°è¯•è®¾è®¡è‡ªå·±çš„å°é¡¹ç›®

4. **é˜…è¯»ä¼˜ç§€ä»£ç **
   - å­¦ä¹ å¼€æºé¡¹ç›®çš„è®¾è®¡æ€è·¯
   - åˆ†æç»å…¸è®¾è®¡æ¨¡å¼çš„å®ç°

## å¸¸è§é—®é¢˜è§£ç­”

**Q: é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸é¢å‘è¿‡ç¨‹ç¼–ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**
A: é¢å‘è¿‡ç¨‹ç¼–ç¨‹å…³æ³¨è§£å†³é—®é¢˜çš„æ­¥éª¤ï¼Œè€Œé¢å‘å¯¹è±¡ç¼–ç¨‹å…³æ³¨é—®é¢˜åŸŸä¸­çš„å¯¹è±¡åŠå…¶äº¤äº’ã€‚é¢å‘å¯¹è±¡ç¼–ç¨‹å…·æœ‰æ›´å¥½çš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œä»£ç å¤ç”¨æ€§ã€‚

**Q: ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ç»§æ‰¿ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨ç»„åˆï¼Ÿ**
A: å½“å­˜åœ¨"æ˜¯ä¸€ä¸ª"(is-a)å…³ç³»æ—¶ä½¿ç”¨ç»§æ‰¿ï¼Œå½“å­˜åœ¨"æœ‰ä¸€ä¸ª"(has-a)å…³ç³»æ—¶ä½¿ç”¨ç»„åˆã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¼˜å…ˆè€ƒè™‘ç»„åˆï¼Œå› ä¸ºå®ƒæä¾›äº†æ›´å¥½çš„çµæ´»æ€§ã€‚

**Q: å¦‚ä½•è®¾è®¡å¥½çš„ç±»æ¥å£ï¼Ÿ**
A: å¥½çš„ç±»æ¥å£åº”è¯¥éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Œæä¾›æ¸…æ™°ã€ä¸€è‡´çš„æ–¹æ³•å‘½åï¼Œéšè—å®ç°ç»†èŠ‚ï¼Œå¹¶ä¸”æ˜“äºä½¿ç”¨å’Œç†è§£ã€‚

**Q: Pythonå’ŒJavaåœ¨OOPä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**
A: ä¸»è¦åŒºåˆ«ï¼š
- Pythonæ˜¯åŠ¨æ€ç±»å‹ï¼ŒJavaæ˜¯é™æ€ç±»å‹
- Pythonæ”¯æŒå¤šé‡ç»§æ‰¿ï¼ŒJavaé€šè¿‡æ¥å£å®ç°å¤šé‡ç»§æ‰¿
- Pythonä½¿ç”¨é¸­å­ç±»å‹ï¼ŒJavaéœ€è¦æ˜¾å¼å£°æ˜ç±»å‹
- Pythonæ›´çµæ´»ï¼ŒJavaæ›´ä¸¥æ ¼

---

## ğŸ“š å­¦ä¹ å»ºè®®ä¸æ€»ç»“

### å­¦ä¹ è·¯å¾„

**é˜¶æ®µ1ï¼šæ¦‚å¿µç†è§£ï¼ˆ2å‘¨ï¼‰**
- âœ… ç†è§£OOPä¸‰å¤§ç‰¹æ€§
- âœ… æŒæ¡ç±»ä¸å¯¹è±¡çš„åŸºæœ¬ç”¨æ³•
- âœ… ç»ƒä¹ ç®€å•çš„ç±»è®¾è®¡

**é˜¶æ®µ2ï¼šè¿›é˜¶åº”ç”¨ï¼ˆ3å‘¨ï¼‰**
- âœ… æŒæ¡æŠ½è±¡ç±»å’Œæ¥å£
- âœ… ç†è§£SOLIDåŸåˆ™
- âœ… å­¦ä¹ å¸¸ç”¨è®¾è®¡æ¨¡å¼

**é˜¶æ®µ3ï¼šå®æˆ˜ç»ƒä¹ ï¼ˆ3å‘¨ï¼‰**
- âœ… å®Œæˆç»¼åˆé¡¹ç›®
- âœ… é‡æ„ç°æœ‰ä»£ç 
- âœ… å‚ä¸ä»£ç å®¡æŸ¥

### å­¦ä¹ èµ„æº

**ğŸ“š æ¨èä¹¦ç±ï¼š**
1. ã€ŠHead Firstè®¾è®¡æ¨¡å¼ã€‹- å›¾æ–‡å¹¶èŒ‚ï¼Œæ˜“äºç†è§£
2. ã€Šé‡æ„ï¼šæ”¹å–„æ—¢æœ‰ä»£ç çš„è®¾è®¡ã€‹- ä»£ç ä¼˜åŒ–å¿…è¯»
3. ã€Šè®¾è®¡æ¨¡å¼ï¼šå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ã€‹- ç»å…¸è‘—ä½œ
4. ã€ŠEffective Javaã€‹- Javaæœ€ä½³å®è·µ

**ğŸ¥ åœ¨çº¿è¯¾ç¨‹ï¼š**
- Coursera: Object-Oriented Programming
- Udemy: Python OOP Complete Course
- MIT OpenCourseWare: Software Construction

**ğŸ’» å®è·µå¹³å°ï¼š**
- LeetCode: OOPè®¾è®¡é¢˜
- GitHub: ä¼˜ç§€å¼€æºé¡¹ç›®
- è‡ªå·±åŠ¨æ‰‹ï¼šä»é›¶å®ç°å°é¡¹ç›®

### å…³é”®è¦ç‚¹æ€»ç»“

**æ ¸å¿ƒæ¦‚å¿µï¼š**
```
å°è£…ï¼šæ•°æ®éšè—ï¼Œæ¥å£æš´éœ²
  â†“
ç»§æ‰¿ï¼šä»£ç å¤ç”¨ï¼Œå±‚æ¬¡ç»“æ„
  â†“
å¤šæ€ï¼šçµæ´»è°ƒç”¨ï¼Œç»Ÿä¸€æ¥å£
```

**è®¾è®¡åŸåˆ™ï¼š**
- **å•ä¸€èŒè´£**ï¼šä¸€ä¸ªç±»åªåšä¸€ä»¶äº‹
- **å¼€é—­åŸåˆ™**ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
- **é‡Œæ°æ›¿æ¢**ï¼šå­ç±»å¯æ›¿æ¢çˆ¶ç±»
- **æ¥å£éš”ç¦»**ï¼šæ¥å£å°è€Œç²¾
- **ä¾èµ–å€’ç½®**ï¼šä¾èµ–æŠ½è±¡ä¸ä¾èµ–å…·ä½“

**è®¾è®¡æ¨¡å¼åˆ†ç±»ï¼š**

| ç±»å‹ | æ¨¡å¼ | ç”¨é€” |
|------|------|------|
| **åˆ›å»ºå‹** | å•ä¾‹ã€å·¥å‚ã€å»ºé€ è€… | å¯¹è±¡åˆ›å»º |
| **ç»“æ„å‹** | é€‚é…å™¨ã€è£…é¥°å™¨ã€ä»£ç† | å¯¹è±¡ç»„åˆ |
| **è¡Œä¸ºå‹** | ç­–ç•¥ã€è§‚å¯Ÿè€…ã€æ¨¡æ¿ | å¯¹è±¡åä½œ |

### å¸¸è§é”™è¯¯ä¸é¿å…

**âŒ é”™è¯¯1ï¼šè¿‡åº¦ä½¿ç”¨ç»§æ‰¿**
```python
# ä¸å¥½ï¼šæ·±å±‚ç»§æ‰¿
class A: pass
class B(A): pass
class C(B): pass
class D(C): pass  # å¤ªæ·±äº†ï¼
```

**âœ… æ”¹è¿›ï¼šä½¿ç”¨ç»„åˆ**
```python
class A:
    def __init__(self):
        self.component_b = B()
        self.component_c = C()
```

**âŒ é”™è¯¯2ï¼šè¿åå°è£…**
```python
class User:
    def __init__(self):
        self.password = "123456"  # ç›´æ¥æš´éœ²ï¼

user = User()
print(user.password)  # ä¸å®‰å…¨
```

**âœ… æ”¹è¿›ï¼šä½¿ç”¨ç§æœ‰å±æ€§**
```python
class User:
    def __init__(self):
        self.__password = "123456"
    
    def verify_password(self, pwd):
        return pwd == self.__password
```

**âŒ é”™è¯¯3ï¼šä¸åˆç†çš„ç±»è®¾è®¡**
```python
# ä¸Šå¸ç±»ï¼šä»€ä¹ˆéƒ½åš
class System:
    def connect_db(self): pass
    def send_email(self): pass
    def generate_report(self): pass
    def process_payment(self): pass
    # ... 100ä¸ªæ–¹æ³•
```

**âœ… æ”¹è¿›ï¼šèŒè´£åˆ†ç¦»**
```python
class DatabaseManager: pass
class EmailService: pass
class ReportGenerator: pass
class PaymentProcessor: pass
```

### å®è·µæŠ€å·§

**1. å…ˆè®¾è®¡åç¼–ç **
```
éœ€æ±‚åˆ†æ â†’ UMLç±»å›¾ â†’ ç¼–ç å®ç° â†’ æµ‹è¯•ä¼˜åŒ–
```

**2. éµå¾ªå‘½åè§„èŒƒ**
- ç±»åï¼šå¤§é©¼å³°ï¼ˆ`UserAccount`ï¼‰
- æ–¹æ³•åï¼šå°é©¼å³°æˆ–ä¸‹åˆ’çº¿ï¼ˆ`getUserInfo`, `get_user_info`ï¼‰
- ç§æœ‰æˆå‘˜ï¼šå‰ç½®ä¸‹åˆ’çº¿ï¼ˆ`_private`, `__very_private`ï¼‰

**3. ç¼–å†™æ–‡æ¡£å’Œæ³¨é‡Š**
```python
class BankAccount:
    """é“¶è¡Œè´¦æˆ·ç±»
    
    Attributes:
        owner: è´¦æˆ·æ‰€æœ‰è€…
        balance: è´¦æˆ·ä½™é¢
    """
    
    def deposit(self, amount):
        """å­˜æ¬¾
        
        Args:
            amount: å­˜æ¬¾é‡‘é¢
            
        Returns:
            bool: æ“ä½œæ˜¯å¦æˆåŠŸ
        """
        pass
```

**4. å•å…ƒæµ‹è¯•**
```python
import unittest

class TestBankAccount(unittest.TestCase):
    def setUp(self):
        self.account = BankAccount("Alice", 1000)
    
    def test_deposit(self):
        self.account.deposit(500)
        self.assertEqual(self.account.get_balance(), 1500)
    
    def test_withdraw(self):
        self.account.withdraw(300)
        self.assertEqual(self.account.get_balance(), 700)
```

### å­¦ä¹ æ£€éªŒæ¸…å•

**åŸºç¡€æŒæ¡ï¼š**
- [ ] èƒ½å¤Ÿå®šä¹‰ç±»å¹¶åˆ›å»ºå¯¹è±¡
- [ ] ç†è§£å°è£…ã€ç»§æ‰¿ã€å¤šæ€çš„æ¦‚å¿µ
- [ ] æŒæ¡è®¿é—®ä¿®é¥°ç¬¦çš„ä½¿ç”¨
- [ ] èƒ½å¤Ÿé‡å†™æ–¹æ³•

**è¿›é˜¶åº”ç”¨ï¼š**
- [ ] èƒ½å¤Ÿè®¾è®¡æŠ½è±¡ç±»å’Œæ¥å£
- [ ] ç†è§£å¹¶åº”ç”¨SOLIDåŸåˆ™
- [ ] æŒæ¡3ç§ä»¥ä¸Šè®¾è®¡æ¨¡å¼
- [ ] èƒ½å¤Ÿè¿›è¡ŒUMLç±»å›¾è®¾è®¡

**å®æˆ˜èƒ½åŠ›ï¼š**
- [ ] ç‹¬ç«‹å®Œæˆä¸­å‹é¡¹ç›®çš„ç±»è®¾è®¡
- [ ] èƒ½å¤Ÿé‡æ„ç°æœ‰ä»£ç 
- [ ] ç†è§£æ¡†æ¶æºç ä¸­çš„OOPåº”ç”¨
- [ ] èƒ½å¤Ÿè¿›è¡Œä»£ç å®¡æŸ¥

---

## ğŸ¯ ä¸‹ä¸€æ­¥å­¦ä¹ æ–¹å‘

å®Œæˆæœ¬è¯¾ç¨‹åï¼Œä½ å¯ä»¥ï¼š

**1. æ·±å…¥å­¦ä¹ è®¾è®¡æ¨¡å¼**
- 23ç§ç»å…¸è®¾è®¡æ¨¡å¼
- ä¼ä¸šçº§åº”ç”¨æ¶æ„æ¨¡å¼
- é¢†åŸŸé©±åŠ¨è®¾è®¡(DDD)

**2. æ¡†æ¶å­¦ä¹ **
- Java: Springæ¡†æ¶
- Python: Django/Flask
- JavaScript: React/Vue

**3. è½¯ä»¶å·¥ç¨‹**
- UMLå»ºæ¨¡
- éœ€æ±‚åˆ†æ
- æ¶æ„è®¾è®¡

**4. å®è·µé¡¹ç›®**
- å¼€å‘å®Œæ•´çš„Webåº”ç”¨
- å‚ä¸å¼€æºé¡¹ç›®
- æ„å»ºè‡ªå·±çš„æ¡†æ¶

---

## ğŸ“ è¯¾ç¨‹æ€»ç»“

é¢å‘å¯¹è±¡ç¼–ç¨‹æ˜¯ç°ä»£è½¯ä»¶å¼€å‘çš„åŸºçŸ³ã€‚é€šè¿‡æœ¬è¯¾ç¨‹çš„å­¦ä¹ ï¼Œä½ å·²ç»æŒæ¡äº†ï¼š

âœ¨ **æ ¸å¿ƒçŸ¥è¯†ï¼š**
- OOPä¸‰å¤§ç‰¹æ€§çš„æ·±å…¥ç†è§£
- ç±»ä¸å¯¹è±¡çš„è®¾è®¡ä¸å®ç°
- æŠ½è±¡ä¸æ¥å£çš„åº”ç”¨

âœ¨ **è®¾è®¡èƒ½åŠ›ï¼š**
- SOLIDè®¾è®¡åŸåˆ™
- å¸¸ç”¨è®¾è®¡æ¨¡å¼
- ç³»ç»Ÿæ¶æ„æ€ç»´

âœ¨ **å®è·µç»éªŒï¼š**
- é¡¹ç›®å¼€å‘æµç¨‹
- ä»£ç é‡æ„æŠ€å·§
- æœ€ä½³å®è·µæ–¹æ³•

è®°ä½ï¼š**OOPä¸æ˜¯é“¶å¼¹ï¼Œä½†å®ƒæ˜¯å¼ºå¤§çš„å·¥å…·ã€‚å…³é”®åœ¨äºç†è§£é—®é¢˜æœ¬è´¨ï¼Œé€‰æ‹©åˆé€‚çš„è®¾è®¡æ–¹æ¡ˆã€‚**

---

> **ç»§ç»­å­¦ä¹ å»ºè®®ï¼š**
> 
> ğŸ”— **ä¸‹ä¸€é—¨è¯¾ç¨‹**ï¼šæ•°æ®ç»“æ„ä¸ç®—æ³•ã€è½¯ä»¶å·¥ç¨‹
> 
> ğŸ’¡ **é¡¹ç›®å®è·µ**ï¼šç”¨OOPæ€æƒ³é‡æ„ä¹‹å‰çš„é¡¹ç›®
> 
> ğŸ“š **æ·±å…¥é˜…è¯»**ï¼šè®¾è®¡æ¨¡å¼ã€ä»£ç æ•´æ´ä¹‹é“
> 
> ğŸ“ **Keep Coding, Keep Learning!**
