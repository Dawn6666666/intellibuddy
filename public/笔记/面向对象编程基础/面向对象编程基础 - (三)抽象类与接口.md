![(三)抽象类与接口](https://via.placeholder.com/800x200?text=Abstract+and+Interface)

# 面向对象编程基础 - (三)抽象类与接口

掌握抽象和接口的使用。

---


### 3.1 抽象类（Abstract Class）

#### 什么是抽象类？

**定义**：包含抽象方法的类，不能被实例化，只能被继承。

**特点：**
- 🚫 不能直接创建对象
- ✅ 可以有抽象方法（只定义不实现）
- ✅ 可以有具体方法（正常实现）
- ✅ 强制子类实现特定方法

#### Python实现（使用ABC模块）

```python
from abc import ABC, abstractmethod

class Database(ABC):
    """抽象数据库类"""
    
    @abstractmethod
    def connect(self):
        """连接数据库（必须实现）"""
        pass
    
    @abstractmethod
    def execute(self, query):
        """执行查询（必须实现）"""
        pass
    
    def log(self, message):
        """日志方法（可选实现）"""
        print(f"[LOG] {message}")

class MySQL(Database):
    def connect(self):
        self.log("Connecting to MySQL")
        # MySQL连接逻辑
    
    def execute(self, query):
        self.log(f"Executing: {query}")
        # 执行SQL

class MongoDB(Database):
    def connect(self):
        self.log("Connecting to MongoDB")
        # MongoDB连接逻辑
    
    def execute(self, query):
        self.log(f"Executing: {query}")
        # 执行查询

# 使用
# db = Database()  # 错误！不能实例化抽象类
mysql = MySQL()
mysql.connect()
```

#### Java抽象类

```java
abstract class Shape {
    protected String color;
    
    // 抽象方法
    public abstract double area();
    public abstract double perimeter();
    
    // 具体方法
    public void setColor(String color) {
        this.color = color;
    }
    
    public String getColor() {
        return color;
    }
}

class Circle extends Shape {
    private double radius;
    
    public Circle(double radius) {
        this.radius = radius;
    }
    
    @Override
    public double area() {
        return Math.PI * radius * radius;
    }
    
    @Override
    public double perimeter() {
        return 2 * Math.PI * radius;
    }
}
```

### 3.2 接口（Interface）

#### 什么是接口？

**定义**：完全抽象的"合同"，规定了类必须实现的方法。

**接口 vs 抽象类：**

| 特性 | 接口 | 抽象类 |
|------|------|--------|
| 方法实现 | 全部抽象（Java 8+可有默认） | 可有具体方法 |
| 继承数量 | 可实现多个接口 | 只能继承一个抽象类 |
| 变量 | 只能有常量 | 可有实例变量 |
| 用途 | 定义能力 | 定义类型 |

#### Python接口（使用ABC）

```python
from abc import ABC, abstractmethod

class Drawable(ABC):
    """可绘制接口"""
    
    @abstractmethod
    def draw(self):
        pass

class Movable(ABC):
    """可移动接口"""
    
    @abstractmethod
    def move(self, x, y):
        pass

class GameObject(Drawable, Movable):
    """游戏对象（实现多个接口）"""
    
    def __init__(self, name):
        self.name = name
        self.x = 0
        self.y = 0
    
    def draw(self):
        print(f"Drawing {self.name} at ({self.x}, {self.y})")
    
    def move(self, x, y):
        self.x = x
        self.y = y
        print(f"{self.name} moved to ({x}, {y})")

# 使用
player = GameObject("Player")
player.draw()
player.move(10, 20)
```

#### Java接口

```java
interface Flyable {
    void fly();
    default void land() {  // Java 8+ 默认方法
        System.out.println("Landing...");
    }
}

interface Swimmable {
    void swim();
}

class Duck implements Flyable, Swimmable {
    @Override
    public void fly() {
        System.out.println("Duck is flying");
    }
    
    @Override
    public void swim() {
        System.out.println("Duck is swimming");
    }
}

// 使用
Duck duck = new Duck();
duck.fly();
duck.swim();
duck.land();  // 使用默认实现
```

---

## 4. SOLID设计原则