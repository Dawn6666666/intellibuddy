![(二)类与对象详解](https://via.placeholder.com/800x200?text=Class+and+Object)

# 面向对象编程基础 - (二)类与对象详解

深入理解类和对象的概念。

---


### 2.1 类的定义

#### 类的基本结构

```python
class ClassName:
    """类的文档字符串"""
    
    # 类变量（所有实例共享）
    class_variable = "shared"
    
    # 构造方法
    def __init__(self, param1, param2):
        """初始化实例"""
        self.instance_var1 = param1  # 实例变量
        self.instance_var2 = param2
    
    # 实例方法
    def instance_method(self):
        """实例方法可以访问实例变量和类变量"""
        return self.instance_var1
    
    # 类方法
    @classmethod
    def class_method(cls):
        """类方法只能访问类变量"""
        return cls.class_variable
    
    # 静态方法
    @staticmethod
    def static_method():
        """静态方法不能访问类或实例变量"""
        return "This is a static method"
```

#### Java类结构

```java
public class Person {
    // 静态变量（类变量）
    private static int population = 0;
    
    // 实例变量
    private String name;
    private int age;
    
    // 构造方法
    public Person(String name, int age) {
        this.name = name;
        this.age = age;
        population++;
    }
    
    // 实例方法
    public void introduce() {
        System.out.println("I'm " + name + ", " + age + " years old");
    }
    
    // 静态方法
    public static int getPopulation() {
        return population;
    }
    
    // Getter和Setter
    public String getName() {
        return name;
    }
    
    public void setName(String name) {
        this.name = name;
    }
}
```

### 2.2 特殊方法（魔法方法）

Python中的特殊方法使类的行为更自然：

```python
class Point:
    def __init__(self, x, y):
        self.x = x
        self.y = y
    
    def __str__(self):
        """字符串表示（用户友好）"""
        return f"Point({self.x}, {self.y})"
    
    def __repr__(self):
        """官方字符串表示（开发者友好）"""
        return f"Point(x={self.x}, y={self.y})"
    
    def __eq__(self, other):
        """相等性比较"""
        return self.x == other.x and self.y == other.y
    
    def __add__(self, other):
        """加法运算"""
        return Point(self.x + other.x, self.y + other.y)
    
    def __len__(self):
        """长度（距离原点）"""
        return int((self.x**2 + self.y**2) ** 0.5)

# 使用
p1 = Point(1, 2)
p2 = Point(3, 4)

print(p1)  # Point(1, 2) - 调用__str__
print(p1 + p2)  # Point(4, 6) - 调用__add__
print(p1 == Point(1, 2))  # True - 调用__eq__
print(len(p1))  # 2 - 调用__len__
```

**常用魔法方法：**

| 方法 | 作用 | 示例 |
|------|------|------|
| `__init__` | 构造方法 | `obj = Class()` |
| `__str__` | 字符串表示 | `str(obj)`, `print(obj)` |
| `__repr__` | 官方表示 | `repr(obj)` |
| `__eq__` | 相等比较 | `obj1 == obj2` |
| `__lt__` | 小于比较 | `obj1 < obj2` |
| `__add__` | 加法 | `obj1 + obj2` |
| `__len__` | 长度 | `len(obj)` |
| `__getitem__` | 索引访问 | `obj[key]` |
| `__setitem__` | 索引赋值 | `obj[key] = value` |

## 3. 抽象类与接口