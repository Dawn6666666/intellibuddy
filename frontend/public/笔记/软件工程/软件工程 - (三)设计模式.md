# 软件工程 - (三)设计模式

掌握常用设计模式。

---

## 3. 设计模式

### 3.1 单例模式

```python
class Singleton:
    _instance = None
    
    def __new__(cls):
        if cls._instance is None:
            cls._instance = super().__new__(cls)
        return cls._instance

# 测试
s1 = Singleton()
s2 = Singleton()
print(s1 is s2)  # True
```

### 3.2 工厂模式

```python
class ShapeFactory:
    @staticmethod
    def create_shape(shape_type):
        if shape_type == 'circle':
            return Circle()
        elif shape_type == 'rectangle':
            return Rectangle()

class Circle:
    def draw(self):
        print("绘制圆形")

class Rectangle:
    def draw(self):
        print("绘制矩形")

# 使用
factory = ShapeFactory()
shape = factory.create_shape('circle')
shape.draw()
```

### 3.3 观察者模式

```python
class Subject:
    def __init__(self):
        self._observers = []
    
    def attach(self, observer):
        self._observers.append(observer)
    
    def notify(self, message):
        for observer in self._observers:
            observer.update(message)

class Observer:
    def update(self, message):
        print(f"收到通知: {message}")

# 使用
subject = Subject()
obs1 = Observer()
subject.attach(obs1)
subject.notify("数据更新")
```

---

**本章完**
