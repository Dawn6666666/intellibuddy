# 计算机导论 - (二)计算机硬件系统

学习计算机硬件的组成和工作原理。

---


### 2.1 冯·诺依曼体系结构

**核心思想：**
1. 计算机由五大部件组成
2. 程序和数据存储在同一存储器中（存储程序思想）
3. 程序由指令序列组成
4. 指令按顺序执行（可改变执行顺序）
5. 指令和数据都以二进制形式表示

#### 存储程序思想

**革命性意义：**
- 程序和数据统一存储在内存中
- 程序可以像数据一样被读取和修改
- 实现了计算机的通用性和可编程性

**示例理解：**
```plain
传统计算器：固定功能，无法改变计算逻辑
冯·诺依曼计算机：可以通过改变程序来改变功能
```

**实际应用：**
- 同一台计算机既可以运行Word，也可以运行游戏
- 只需加载不同的程序到内存即可切换功能
- 软件定义功能，硬件提供通用能力

#### 五大部件详解

**五大部件：**

```plain
┌─────────────────────────────────┐
│         输入设备（Input）         │
│    键盘、鼠标、麦克风、摄像头      │
└──────────────┬──────────────────┘
               ↓
┌──────────────────────────────────┐
│      存储器（Memory）              │
│    RAM、ROM、缓存                 │
│    - 程序                         │
│    - 数据                         │
└──────┬───────────────────┬───────┘
       ↓                   ↓
┌──────────────┐    ┌─────────────┐
│  运算器（ALU） │←→│  控制器（CU） │
└──────────────┘    └─────────────┘
       ↓
┌─────────────────────────────────┐
│        输出设备（Output）          │
└─────────────────────────────────┘
```

### 2.2 中央处理器（CPU）

**组成部分：**

1. **运算器（ALU - Arithmetic Logic Unit）**
   - 算术运算（加减乘除）
   - 逻辑运算（与或非）
   - 移位操作

2. **控制器（CU - Control Unit）**
   - 指令译码
   - 控制信号生成
   - 程序计数器（PC）
   - 指令寄存器（IR）

3. **寄存器组**
   - 通用寄存器
   - 程序计数器（PC）
   - 状态寄存器

**CPU主要性能指标：**

| 指标 | 说明 | 单位 |
|------|------|------|
| 主频（Clock Speed） | 时钟频率 | GHz |
| 核心数（Cores） | 处理器核心数量 | 个 |
| 缓存（Cache） | 高速缓存大小 | MB |
| 制程（Process） | 芯片制造工艺 | nm |
| 指令集（ISA） | 支持的指令集架构 | x86, ARM |

**经典CPU：**
- Intel Core 系列（桌面）
- AMD Ryzen 系列（桌面）
- ARM Cortex 系列（移动）
- Apple M 系列（ARM架构）

#### CPU工作原理

**指令执行周期（Instruction Cycle）：**

```plain
1. 取指（Fetch）
   ↓
2. 译码（Decode）
   ↓
3. 执行（Execute）
   ↓
4. 访存（Memory）
   ↓
5. 写回（Write Back）
```

**流水线技术（Pipeline）：**

多条指令同时在不同阶段执行，提高效率。

```plain
时钟周期：  1    2    3    4    5    6
指令1：    取指  译码  执行  访存  写回
指令2：         取指  译码  执行  访存  写回
指令3：              取指  译码  执行  访存
```

**超线程技术（Hyper-Threading）：**
- 一个物理核心虚拟成两个逻辑核心
- 提高资源利用率
- 性能提升约20-30%

**多核处理器：**

| 核心数 | 应用场景 | 示例产品 |
|--------|----------|----------|
| 2核 | 轻度办公 | Intel i3 |
| 4核 | 日常使用 | Intel i5 |
| 6-8核 | 游戏/创作 | Intel i7, AMD R7 |
| 12核以上 | 专业工作站 | AMD Threadripper |
| 64核以上 | 服务器 | AMD EPYC |

### 2.3 存储系统

#### 存储器层次结构

```plain
速度快 ↑          容量小 ↑         价格高 ↑
────────────────────────────────────────
寄存器（Register）         ～1KB
    ↓
L1 缓存（Cache）           ～256KB
    ↓
L2 缓存                    ～1-8MB
    ↓
L3 缓存                    ～8-64MB
    ↓
内存（RAM）                 ～8-32GB
    ↓
固态硬盘（SSD）            ～256GB-2TB
    ↓
机械硬盘（HDD）            ～1TB-20TB
────────────────────────────────────────
速度慢 ↓          容量大 ↓         价格低 ↓
```

#### 内存（RAM）

**RAM vs ROM：**

| 特性 | RAM | ROM |
|------|-----|-----|
| 全称 | Random Access Memory | Read-Only Memory |
| 易失性 | 断电丢失 | 断电保存 |
| 读写 | 可读写 | 只读（或不易写） |
| 速度 | 快 | 较慢 |
| 用途 | 程序运行 | BIOS、固件 |

**RAM类型：**
- **DRAM**（动态RAM）：需要定时刷新，常用于主内存
- **SRAM**（静态RAM）：不需刷新，速度快，用于缓存

#### 外部存储器

| 类型 | 原理 | 速度 | 容量 | 价格 |
|------|------|------|------|------|
| HDD | 磁盘 | 慢 | 大 | 低 |
| SSD（SATA） | 闪存 | 中 | 中 | 中 |
| SSD（NVMe） | 闪存+PCIe | 快 | 中 | 高 |
| 光盘 | 激光 | 慢 | 小 | 低 |
| U盘 | 闪存 | 中 | 小 | 低 |

#### 缓存工作原理

**局部性原理：**

1. **时间局部性**：最近访问的数据很可能再次被访问
2. **空间局部性**：访问某数据后，其附近的数据也可能被访问

**缓存映射方式：**

| 映射方式 | 特点 | 命中率 | 硬件成本 |
|----------|------|--------|----------|
| 直接映射 | 每个主存块对应唯一缓存位置 | 低 | 低 |
| 全相联映射 | 主存块可放任意缓存位置 | 高 | 高 |
| 组相联映射 | 折中方案 | 中 | 中 |

**缓存命中率计算：**

$$
\text{命中率} = \frac{\text{缓存命中次数}}{\text{总访问次数}} \times 100\%
$$

**示例：**
访问100次内存，90次在缓存中找到数据，命中率 = 90/100 = 90%

#### 虚拟内存

**概念**：用硬盘空间扩展内存。

**分页机制：**
- 将内存和硬盘分成固定大小的页（Page）
- 页面大小通常为 4KB 或 8KB
- 使用页表（Page Table）管理映射

**页面置换算法：**

| 算法 | 策略 | 优点 | 缺点 |
|------|------|------|------|
| FIFO | 先进先出 | 简单 | 可能淘汰常用页 |
| LRU | 最近最少使用 | 命中率高 | 实现复杂 |
| LFU | 最不常用 | 考虑使用频率 | 开销大 |
| Clock | 时钟算法 | 折中 | 近似LRU |

### 2.4 总线系统

**总线定义**：连接计算机各部件的公共通信通道。

#### 总线分类

**按功能分类：**

```plain
数据总线（Data Bus）
    ↓ 传输数据
地址总线（Address Bus）
    ↓ 传输地址
控制总线（Control Bus）
    ↓ 传输控制信号
```

**按位置分类：**

| 总线类型 | 连接部件 | 示例 |
|----------|----------|------|
| 内部总线 | CPU内部 | ALU与寄存器 |
| 系统总线 | CPU与主板 | 前端总线（FSB） |
| I/O总线 | 外部设备 | USB、PCIe |

**常见总线标准：**

| 标准 | 类型 | 速度 | 应用 |
|------|------|------|------|
| PCIe 4.0 | 内部 | 16 GB/s | 显卡、SSD |
| USB 3.2 | 外部 | 2.5 GB/s | 外设 |
| SATA III | 存储 | 600 MB/s | 硬盘 |
| Thunderbolt 4 | 通用 | 40 Gb/s | 高速传输 |

#### 总线性能指标

1. **总线宽度**：一次传输的数据位数（32位、64位）
2. **总线频率**：工作频率（MHz、GHz）
3. **总线带宽**：数据传输速率

**带宽计算公式：**

$$
\text{带宽} = \text{总线宽度} \times \text{总线频率}
$$

**示例：**
64位总线，频率133MHz，带宽 = 64 × 133M = 8.512 Gb/s ≈ 1 GB/s

### 2.5 输入输出设备

#### 输入设备

| 设备 | 功能 | 示例 |
|------|------|------|
| 键盘 | 文字输入 | 机械键盘、薄膜键盘 |
| 鼠标 | 指针控制 | 光学鼠标、激光鼠标 |
| 触摸屏 | 触控输入 | 电容屏、电阻屏 |
| 扫描仪 | 图像输入 | 平板扫描仪 |
| 摄像头 | 视频输入 | 网络摄像头 |
| 麦克风 | 音频输入 | 驻极体话筒 |

#### 输出设备

| 设备 | 功能 | 技术 |
|------|------|------|
| 显示器 | 图像显示 | LCD、OLED、LED |
| 打印机 | 纸质输出 | 喷墨、激光 |
| 音箱 | 音频输出 | 模拟/数字音箱 |
| 投影仪 | 大屏显示 | DLP、LCD |

### 2.6 显示技术详解

#### 显示器类型对比

| 技术 | 原理 | 优点 | 缺点 | 应用 |
|------|------|------|------|------|
| **LCD** | 液晶+背光 | 成本低、成熟 | 黑色不纯、响应慢 | 普通显示器 |
| **IPS** | LCD改进 | 可视角度大、色彩准 | 响应时间较慢 | 专业显示器 |
| **TN** | LCD类型 | 响应快、便宜 | 可视角度小 | 游戏显示器 |
| **VA** | LCD类型 | 对比度高 | 响应中等 | 影音显示器 |
| **OLED** | 自发光 | 黑色纯、响应极快 | 寿命短、烧屏 | 高端手机、电视 |
| **MiniLED** | 微型LED背光 | 对比度高、亮度高 | 成本较高 | 高端显示器 |
| **MicroLED** | 微型自发光 | 集合所有优点 | 成本极高、技术难 | 未来趋势 |

#### 显示参数

**分辨率：**

| 名称 | 分辨率 | 宽高比 | 应用 |
|------|--------|--------|------|
| HD | 1280×720 | 16:9 | 入门级 |
| Full HD | 1920×1080 | 16:9 | 主流 |
| 2K (QHD) | 2560×1440 | 16:9 | 高端 |
| 4K (UHD) | 3840×2160 | 16:9 | 专业/游戏 |
| 5K | 5120×2880 | 16:9 | 设计工作 |
| 8K | 7680×4320 | 16:9 | 顶级 |

**刷新率：**

| 刷新率 | 说明 | 应用场景 |
|--------|------|----------|
| 60Hz | 标准刷新率 | 日常办公 |
| 75Hz | 入门高刷 | 轻度游戏 |
| 144Hz | 电竞标准 | 竞技游戏 |
| 240Hz | 顶级电竞 | 专业电竞 |
| 360Hz | 极限刷新 | 职业选手 |

**响应时间：**

$$
\text{响应时间} = \text{灰阶切换时间（GTG）}
$$

- 1ms：顶级游戏显示器
- 4ms：普通游戏显示器
- 5-8ms：日常显示器

### 2.7 存储技术深入

#### SSD vs HDD详细对比

**工作原理：**

**HDD（机械硬盘）：**
```plain
磁盘盘片
   ↓
磁头读写
   ↓
马达旋转（5400/7200 RPM）
   ↓
机械臂移动
```

**SSD（固态硬盘）：**
```plain
NAND闪存颗粒
   ↓
主控芯片
   ↓
电子信号读写（无机械部件）
```

**性能对比：**

| 指标 | HDD | SATA SSD | NVMe SSD |
|------|-----|----------|----------|
| **顺序读取** | 120 MB/s | 550 MB/s | 3500 MB/s |
| **顺序写入** | 120 MB/s | 520 MB/s | 3000 MB/s |
| **随机读取IOPS** | 100 | 90,000 | 500,000 |
| **延迟** | 10-15ms | 0.1ms | 0.02ms |
| **功耗（待机）** | 5-10W | 2-3W | 2-5W |
| **抗震性** | 差 | 优秀 | 优秀 |
| **噪音** | 有 | 无 | 无 |
| **寿命（写入）** | 无限制 | 150-300 TBW | 200-600 TBW |
| **价格（每TB）** | $20 | $50 | $80 |

**SSD类型：**

| 类型 | 单元 | 性能 | 寿命 | 价格 | 应用 |
|------|------|------|------|------|------|
| **SLC** | 1bit/cell | 极高 | 极长 | 极贵 | 企业级 |
| **MLC** | 2bit/cell | 高 | 长 | 贵 | 高端消费 |
| **TLC** | 3bit/cell | 中 | 中 | 中 | 主流消费 |
| **QLC** | 4bit/cell | 低 | 短 | 便宜 | 大容量存储 |

#### RAID技术

**RAID级别：**

| 级别 | 最少磁盘 | 容量利用率 | 性能 | 冗余 | 说明 |
|------|----------|-----------|------|------|------|
| **RAID 0** | 2 | 100% | 读写快 | 无 | 条带化，一个坏全坏 |
| **RAID 1** | 2 | 50% | 读快 | 有 | 镜像，可坏一块 |
| **RAID 5** | 3 | (n-1)/n | 中 | 有 | 分布式奇偶校验 |
| **RAID 6** | 4 | (n-2)/n | 中 | 有 | 双重校验，可坏两块 |
| **RAID 10** | 4 | 50% | 快 | 有 | RAID 1+0 组合 |

**示例：4块1TB硬盘**

```plain
RAID 0: 4TB 可用，无冗余
RAID 1: 2TB 可用，镜像备份
RAID 5: 3TB 可用，允许坏1块
RAID 10: 2TB 可用，性能+冗余
```

### 2.8 CPU微架构详解

#### 现代CPU架构

**Intel Core架构演进：**

| 代号 | 年份 | 制程 | 特点 |
|------|------|------|------|
| Nehalem | 2008 | 45nm | 集成内存控制器 |
| Sandy Bridge | 2011 | 32nm | AVX指令集 |
| Haswell | 2013 | 22nm | AVX2、低功耗 |
| Skylake | 2015 | 14nm | 架构优化 |
| Coffee Lake | 2017 | 14nm++ | 增加核心数 |
| Ice Lake | 2019 | 10nm | 改进AI性能 |
| Alder Lake | 2021 | Intel 7 | 大小核混合 |
| Raptor Lake | 2022 | Intel 7 | 优化大小核 |
| Meteor Lake | 2023 | Intel 4 | Chiplet设计 |

**AMD Zen架构演进：**

| 代号 | 年份 | 制程 | IPC提升 |
|------|------|------|---------|
| Zen | 2017 | 14nm | +52% |
| Zen+ | 2018 | 12nm | +3% |
| Zen 2 | 2019 | 7nm | +15% |
| Zen 3 | 2020 | 7nm | +19% |
| Zen 4 | 2022 | 5nm | +13% |
| Zen 5 | 2024 | 4nm | +16% |

#### 大小核架构（Hybrid Architecture）

**Intel 12代及以后：**

```plain
Performance Cores (P-Core)
- 高性能
- 超线程
- 处理重负载

Efficient Cores (E-Core)
- 高能效
- 无超线程
- 处理后台任务
```

**示例：Intel i9-14900K**

- 8个P-Core（16线程）
- 16个E-Core（16线程）
- 总计：24核32线程

**调度策略：**
- Windows 11 Thread Director
- 识别任务类型
- 动态分配核心

### 2.9 内存技术演进

#### DDR技术对比

| 代数 | 年份 | 电压 | 频率 | 带宽（单通道） | 特点 |
|------|------|------|------|----------------|------|
| **DDR** | 2000 | 2.5V | 200-400 MHz | 1.6-3.2 GB/s | 第一代 |
| **DDR2** | 2003 | 1.8V | 400-800 MHz | 3.2-6.4 GB/s | 提升频率 |
| **DDR3** | 2007 | 1.5V | 800-2133 MHz | 6.4-17 GB/s | 主流多年 |
| **DDR4** | 2014 | 1.2V | 2133-3200 MHz | 17-25.6 GB/s | 当前主流 |
| **DDR5** | 2020 | 1.1V | 4800-8400 MHz | 38.4-67.2 GB/s | 未来趋势 |

**DDR5优势：**
- 双通道架构（每个DIMM）
- 更高频率
- 片上ECC
- 更低电压

#### 内存时序（Timing）

**常见参数：**

$$
\text{CL-tRCD-tRP-tRAS}
$$

**示例：** DDR4-3200 CL16-18-18-38

- **CL（CAS Latency）**：列访问延迟
- **tRCD**：行到列延迟
- **tRP**：行预充电时间
- **tRAS**：行激活时间

**真实延迟计算：**

$$
\text{延迟(ns)} = \frac{CL \times 2000}{\text{频率(MHz)}}
$$

**示例：**

$$
\text{DDR4-3200 CL16} = \frac{16 \times 2000}{3200} = 10 \text{ns}
$$

$$
\text{DDR5-4800 CL40} = \frac{40 \times 2000}{4800} = 16.67 \text{ns}
$$

### 2.10 散热与电源

#### CPU散热方案

| 方案 | 散热能力（TDP） | 噪音 | 成本 | 应用 |
|------|----------------|------|------|------|
| **原装散热器** | <65W | 大 | 低 | 入门CPU |
| **塔式风冷** | 150-220W | 中 | 中 | 主流CPU |
| **双塔风冷** | 200-250W | 中 | 中高 | 高端CPU |
| **一体式水冷（AIO）** | 250-300W | 小 | 高 | 超频/高端 |
| **分体式水冷** | 300W+ | 极小 | 极高 | 发烧级 |
| **液氮** | 无限制 | - | - | 极限超频 |

#### 电源（PSU）规格

**80 PLUS认证：**

| 认证 | 50%负载效率 | 应用 |
|------|-------------|------|
| 80 PLUS | 80% | 入门 |
| 80 PLUS Bronze | 82% | 主流 |
| 80 PLUS Silver | 85% | 中端 |
| 80 PLUS Gold | 87% | 高端 |
| 80 PLUS Platinum | 90% | 顶级 |
| 80 PLUS Titanium | 92% | 服务器 |

**功率计算：**

$$
\text{电源功率} = (\text{CPU功耗} + \text{显卡功耗} + \text{其他}) \times 1.3
$$

**示例配置：**
- CPU（i7-14700K）：125W
- 显卡（RTX 4070）：200W
- 其他（主板+硬盘+风扇）：50W
- 推荐电源：$(125 + 200 + 50) \times 1.3 \approx 500W$

---

**本章完**