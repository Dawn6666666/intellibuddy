# è®¡ç®—æœºç½‘ç»œ - (åä¸€)WiresharkæŠ“åŒ…åˆ†æž

å­¦ä¹ æŠ“åŒ…åˆ†æžæŠ€æœ¯ã€‚

---


### 11.1 å¸¸ç”¨è¿‡æ»¤å™¨

```bash
# åè®®è¿‡æ»¤
http
tcp
udp
dns
icmp

# IPè¿‡æ»¤
ip.addr == 192.168.1.1
ip.src == 192.168.1.1
ip.dst == 192.168.1.100

# ç«¯å£è¿‡æ»¤
tcp.port == 80
tcp.srcport == 8080
tcp.dstport == 443

# HTTPè¿‡æ»¤
http.request.method == "GET"
http.request.uri contains "login"
http.response.code == 200

# ç»„åˆè¿‡æ»¤
ip.src == 192.168.1.1 && tcp.port == 80
tcp.flags.syn == 1 && tcp.flags.ack == 0  # SYNåŒ…
```

### 11.2 TCPä¸‰æ¬¡æ¡æ‰‹æŠ“åŒ…

```plain
æŠ“åŒ…ç»“æžœï¼š

1. [SYN] å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨
   - Flags: 0x002 (SYN)
   - Seq: 0
   - Window: 65535

2. [SYN, ACK] æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯
   - Flags: 0x012 (SYN, ACK)
   - Seq: 0
   - Ack: 1

3. [ACK] å®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨
   - Flags: 0x010 (ACK)
   - Seq: 1
   - Ack: 1

è¿žæŽ¥å»ºç«‹å®Œæˆï¼
```

### 11.3 HTTPè¯·æ±‚åˆ†æž

```plain
GET /index.html HTTP/1.1
Host: www.example.com
User-Agent: Mozilla/5.0
Accept: text/html
Accept-Language: zh-CN,zh;q=0.9
Accept-Encoding: gzip, deflate
Connection: keep-alive

å…³é”®ä¿¡æ¯ï¼š
- è¯·æ±‚æ–¹æ³•: GET
- è¯·æ±‚è·¯å¾„: /index.html
- åè®®ç‰ˆæœ¬: HTTP/1.1
- Hostå¤´: www.example.com
- è¿žæŽ¥ä¿æŒ: keep-alive
```

---

## ðŸ“š å­¦ä¹ å»ºè®®

### å®žè·µé¡¹ç›®

1. **WiresharkæŠ“åŒ…åˆ†æž**
   - åˆ†æžTCPä¸‰æ¬¡æ¡æ‰‹/å››æ¬¡æŒ¥æ‰‹
   - HTTP/HTTPSè¯·æ±‚å“åº”
   - DNSæŸ¥è¯¢è¿‡ç¨‹
   - ARPåè®®å·¥ä½œ

2. **å®žçŽ°HTTPæœåŠ¡å™¨**
   - æ”¯æŒé™æ€æ–‡ä»¶æœåŠ¡
   - å¤„ç†GET/POSTè¯·æ±‚
   - å®žçŽ°Keep-Alive
   - å¤šçº¿ç¨‹å¤„ç†

3. **ç½‘ç»œçˆ¬è™«**
   - requestsåº“ä½¿ç”¨
   - å¤„ç†Cookieå’ŒSession
   - åçˆ¬è™«ç­–ç•¥
   - å¹¶å‘çˆ¬å–

4. **èŠå¤©å®¤åº”ç”¨**
   - WebSocketå®žæ—¶é€šä¿¡
   - ç”¨æˆ·è®¤è¯
   - æ¶ˆæ¯å¹¿æ’­
   - åŽ†å²è®°å½•å­˜å‚¨

### æŽ¨èèµ„æº

ðŸ“– **ç»å…¸æ•™æï¼š**
- ã€Šè®¡ç®—æœºç½‘ç»œï¼šè‡ªé¡¶å‘ä¸‹æ–¹æ³•ã€‹ï¼ˆç¬¬8ç‰ˆï¼‰- ç†è®ºæ¸…æ™°
- ã€ŠTCP/IPè¯¦è§£ å·1ï¼šåè®®ã€‹- æ·±å…¥åè®®
- ã€ŠHTTPæƒå¨æŒ‡å—ã€‹- HTTPè¯¦è§£
- ã€Šå›¾è§£TCP/IPã€‹- å…¥é—¨å‹å¥½

ðŸ’» **åœ¨çº¿è¯¾ç¨‹ï¼š**
- **Stanford CS144**ï¼ˆComputer Networkï¼‰
- **æ¸…åŽå¤§å­¦ã€Šè®¡ç®—æœºç½‘ç»œåŽŸç†ã€‹**
- Courseraã€Šè®¡ç®—æœºç½‘ç»œã€‹

ðŸŽ¥ **è§†é¢‘èµ„æºï¼š**
- Bç«™ã€Šè®¡ç®—æœºç½‘ç»œå¾®è¯¾å ‚ã€‹
- YouTube Computerphileé¢‘é“

### å­¦ä¹ è·¯çº¿

**ç¬¬1é˜¶æ®µï¼šåŸºç¡€æ¦‚å¿µï¼ˆ2å‘¨ï¼‰**
- âœ… OSIä¸ƒå±‚æ¨¡åž‹
- âœ… TCP/IPåè®®æ ˆ
- âœ… æ•°æ®å°è£…ä¸Žè§£å°è£…

**ç¬¬2é˜¶æ®µï¼šåº”ç”¨å±‚ï¼ˆ2å‘¨ï¼‰**
- âœ… HTTP/HTTPS
- âœ… DNS
- âœ… FTP/SMTP

**ç¬¬3é˜¶æ®µï¼šä¼ è¾“å±‚ï¼ˆ3å‘¨ï¼‰**
- âœ… TCPåè®®è¯¦è§£
- âœ… UDPåè®®
- âœ… æ‹¥å¡žæŽ§åˆ¶

**ç¬¬4é˜¶æ®µï¼šç½‘ç»œå±‚ï¼ˆ3å‘¨ï¼‰**
- âœ… IPåè®®
- âœ… è·¯ç”±ç®—æ³•
- âœ… NAT/DHCP

**ç¬¬5é˜¶æ®µï¼šé“¾è·¯å±‚ï¼ˆ2å‘¨ï¼‰**
- âœ… ä»¥å¤ªç½‘
- âœ… ARPåè®®
- âœ… WiFi

### é¢è¯•é«˜é¢‘é¢˜

**åŸºç¡€æ¦‚å¿µ**
1. OSIä¸ƒå±‚æ¨¡åž‹å’ŒTCP/IPå››å±‚æ¨¡åž‹çš„åŒºåˆ«ï¼Ÿ
2. ä»Žè¾“å…¥URLåˆ°é¡µé¢å±•ç¤ºå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ
3. HTTPå’ŒHTTPSçš„åŒºåˆ«ï¼Ÿ

**TCPåè®®**
1. TCPä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„è¿‡ç¨‹ï¼Ÿ
2. ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿ
3. TIME_WAITçŠ¶æ€çš„ä½œç”¨ï¼Ÿ
4. TCPå¦‚ä½•ä¿è¯å¯é ä¼ è¾“ï¼Ÿ
5. TCPæ‹¥å¡žæŽ§åˆ¶ç®—æ³•æœ‰å“ªäº›ï¼Ÿ

**HTTPåè®®**
1. HTTP/1.0ã€HTTP/1.1ã€HTTP/2çš„åŒºåˆ«ï¼Ÿ
2. GETå’ŒPOSTçš„åŒºåˆ«ï¼Ÿ
3. Cookieå’ŒSessionçš„åŒºåˆ«ï¼Ÿ
4. HTTPç¼“å­˜æœºåˆ¶ï¼Ÿ

**ç½‘ç»œå±‚**
1. IPåœ°å€åˆ†ç±»å’Œå­ç½‘åˆ’åˆ†ï¼Ÿ
2. ARPåè®®çš„å·¥ä½œåŽŸç†ï¼Ÿ
3. NATçš„ä½œç”¨å’ŒåŽŸç†ï¼Ÿ
4. è·¯ç”±ç®—æ³•æœ‰å“ªäº›ï¼Ÿ

### å®žç”¨å·¥å…·

**æŠ“åŒ…åˆ†æž**
- **Wireshark** - å›¾å½¢åŒ–æŠ“åŒ…å·¥å…·
- **tcpdump** - å‘½ä»¤è¡ŒæŠ“åŒ…
- **Fiddler** - HTTPè°ƒè¯•ä»£ç†

**ç½‘ç»œæµ‹è¯•**
- `ping` - æµ‹è¯•è¿žé€šæ€§ï¼ˆICMPï¼‰
- `traceroute/tracert` - è·¯ç”±è·Ÿè¸ª
- `netstat` - ç½‘ç»œçŠ¶æ€æŸ¥çœ‹
- `nslookup/dig` - DNSæŸ¥è¯¢
- `curl/wget` - HTTPè¯·æ±‚

**å¼€å‘å·¥å…·**
- **Postman** - APIæµ‹è¯•
- **Chrome DevTools** - æµè§ˆå™¨è°ƒè¯•
- **ngrok** - å†…ç½‘ç©¿é€

### å¸¸è§é”™è¯¯

âŒ **é”™è¯¯1**ï¼šæ··æ·†TCPå’ŒUDP

- âœ… TCPï¼šå¯é ã€é¢å‘è¿žæŽ¥ã€æœ‰åº
- âœ… UDPï¼šä¸å¯é ã€æ— è¿žæŽ¥ã€é«˜æ•ˆ

âŒ **é”™è¯¯2**ï¼šä¸ç†è§£ä¸‰æ¬¡æ¡æ‰‹

- âœ… ç¬¬ä¸€æ¬¡ï¼šç¡®è®¤å®¢æˆ·ç«¯å‘é€èƒ½åŠ›
- âœ… ç¬¬äºŒæ¬¡ï¼šç¡®è®¤æœåŠ¡å™¨æ”¶å‘èƒ½åŠ›
- âœ… ç¬¬ä¸‰æ¬¡ï¼šç¡®è®¤å®¢æˆ·ç«¯æŽ¥æ”¶èƒ½åŠ›

âŒ **é”™è¯¯3**ï¼šå¿½ç•¥HTTPç¼“å­˜

- âœ… åˆç†ä½¿ç”¨ç¼“å­˜æå‡æ€§èƒ½
- âœ… ç†è§£å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜

âŒ **é”™è¯¯4**ï¼šä¸ä¼šæŠ“åŒ…åˆ†æž

- âœ… å­¦ä¼šä½¿ç”¨Wireshark
- âœ… æŽŒæ¡è¿‡æ»¤å™¨è¯­æ³•
- âœ… åˆ†æžå®žé™…ç½‘ç»œé—®é¢˜

### æœ€ä½³å®žè·µ

**æ€§èƒ½ä¼˜åŒ–**
- ä½¿ç”¨HTTP/2å¤šè·¯å¤ç”¨
- å¯ç”¨GZIPåŽ‹ç¼©
- åˆç†è®¾ç½®ç¼“å­˜
- å‡å°‘DNSæŸ¥è¯¢
- ä½¿ç”¨CDNåŠ é€Ÿ

**å®‰å…¨æ€§**
- ä½¿ç”¨HTTPSåŠ å¯†
- é˜²æ­¢XSS/CSRFæ”»å‡»
- é™åˆ¶è¯·æ±‚é¢‘çŽ‡
- éªŒè¯ç”¨æˆ·è¾“å…¥

**å¯é æ€§**
- å®žçŽ°è¶…æ—¶é‡è¯•
- å¿ƒè·³æ£€æµ‹
- è´Ÿè½½å‡è¡¡
- æ•…éšœè½¬ç§»

---

> **è®°ä½**ï¼šç½‘ç»œæ˜¯è¿žæŽ¥ä¸–ç•Œçš„æ¡¥æ¢ï¼ç†è§£ç½‘ç»œåŽŸç†æ˜¯æ¯ä¸ªç¨‹åºå‘˜çš„å¿…ä¿®è¯¾ï¼ðŸŒ
> 
> **å­¦ä¹ å¿ƒå¾—**ï¼š
> - ç†è®ºä¸Žå®žè·µç»“åˆ
> - å¤šæŠ“åŒ…åˆ†æžçœŸå®žæµé‡
> - åŠ¨æ‰‹å®žçŽ°åè®®
> - å…³æ³¨å®žé™…åº”ç”¨åœºæ™¯

---

**æœ¬ç« å®Œ**
