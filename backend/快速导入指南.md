# 快速导入指南 🚀

> 5分钟完成知识库数据导入

## ⚡ 快速开始（三步走）

### 第1步：配置环境变量

在 `backend` 目录创建 `.env` 文件：

```bash
# 使用 MongoDB Atlas（推荐）
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/intellibuddy

# 或使用本地 MongoDB
MONGO_URI=mongodb://localhost:27017/intellibuddy
```

### 第2步：一键导入

```bash
cd backend
npm run seed:all
```

⏱️ **预计时间：** 1-2分钟  
📊 **导入内容：** 24个知识点 + 250个笔记文件

### 第3步：启动服务

```bash
npm run dev
```

🎉 **完成！** 访问 http://localhost:5001/api/knowledge-points

---

## 📋 其他导入方式

### 分步导入

```bash
# 步骤1: 导入知识点
npm run seed

# 步骤2: 填充笔记
npm run fill:content
```

### 按学年导入

```bash
npm run seed:year1  # 5个知识点
npm run seed:year2  # 8个知识点
npm run seed:year3  # 5个知识点
npm run seed:year4  # 6个知识点
```

### 使用CommonJS脚本

```bash
npm run import:local  # 本地MongoDB
npm run import        # MongoDB Atlas
```

---

## 🎯 知识点概览

| 学年 | 数量 | 知识点ID |
|------|------|----------|
| 第一学年 | 5个 | cs101, math101, cs102-discrete, cs100, cs103 |
| 第二学年 | 8个 | math201, cs104, math102, cs201, cs202, cs203, cs204, cs205 |
| 第三学年 | 5个 | cs206-pl, cs206-db, cs301, ai1, ai2 |
| 第四学年 | 6个 | cs402, sec1, cs499, math203, phys101, eng101 |

**总计：** 24个知识点，250个笔记文件

---

## ❓ 常见问题

### Q: 导入失败，连接不上MongoDB？

**A:** 检查以下几点：
1. MongoDB服务是否启动
2. 连接字符串是否正确
3. MongoDB Atlas白名单是否配置（添加 0.0.0.0/0）

### Q: 提示找不到数据文件？

**A:** 确保运行的是 TypeScript 脚本：
```bash
npm run seed:all  # ✅ 推荐
npm run import    # ❌ 需要JSON文件
```

### Q: 如何清空数据重新导入？

**A:** 直接运行导入命令即可，会自动清空：
```bash
npm run seed:all  # 自动清空旧数据
```

### Q: 笔记内容没有加载？

**A:** 检查笔记文件路径：
1. 确保 `public/笔记/` 目录存在
2. 运行 `npm run fill:content` 单独填充

---

## 📞 获取帮助

- 📖 详细文档：`backend/README-导入数据.md`
- 🔄 更新说明：`backend/导入脚本更新说明.md`
- 📋 映射关系：`映射关系审阅.md`

---

## ✅ 验证导入成功

运行以下命令验证：

```bash
# 测试API
curl http://localhost:5001/api/knowledge-points

# 或在浏览器访问
http://localhost:5001/api/knowledge-points
```

应该看到24个知识点的JSON数据。

---

**💡 提示：** 首次导入推荐使用 `npm run seed:all`，它会自动完成所有步骤！

