# 📝 题库模板更新说明

## 🎉 更新内容

本次更新完善了题库模板，添加了 **LaTeX 公式支持**的完整说明和示例。

## ✅ 已完成的工作

### 1. 📐 LaTeX 公式支持文档

#### 📄 `题库模板说明.md`
- ✅ 添加了完整的 LaTeX 公式语法说明
- ✅ 提供了常用符号速查表
- ✅ 添加了 3 个完整示例：
  - **示例 1**：算法题库（带公式）
  - **示例 2**：数学题库（微积分）
  - **示例 3**：物理题库（经典力学）
- ✅ 强调了 JSON 中的注意事项（反斜杠转义）

#### 📄 `快速开始.md`
- ✅ 添加了 LaTeX 公式支持章节
- ✅ 提供了基本用法示例
- ✅ 添加了常用符号快速参考表
- ✅ 详细说明了 JSON 中使用 LaTeX 的注意事项
- ✅ 提供了完整的带公式题目示例

#### 📄 `quiz-template.json`
- ✅ 添加了 `示例_LaTeX公式题库` 部分
  - 数学题库示例（微积分）
  - 物理题库示例（经典力学）
- ✅ 添加了 `LaTeX公式模板_空白` 部分
- ✅ 添加了 `LaTeX常用符号参考` 部分
- ✅ 所有示例都正确转义了反斜杠

#### 📄 `README.md`（新建）
- ✅ 创建了完整的题库管理系统总览文档
- ✅ 包含特性介绍、快速开始、文档导航
- ✅ 详细的 LaTeX 公式支持说明
- ✅ 三种题型的完整格式说明
- ✅ 常用命令速查
- ✅ 最佳实践和反例对比
- ✅ API 使用说明
- ✅ 多个使用场景示例
- ✅ 常见问题解答

### 2. 💻 代码更新

#### 📄 `backend/src/seed-quiz-data.ts`
- ✅ 添加了 `mathAndPhysicsQuizzes` 示例数组
- ✅ 包含完整的 LaTeX 公式题目示例（已注释）
- ✅ 提供了数学和物理题目的参考模板

### 3. 📚 文档结构

更新后的文档结构：

```
backend/quiz-templates/
├── README.md                    # 📌 总览和入口文档（新建）
├── 快速开始.md                  # ✨ 详细教程（已更新）
├── 题库模板说明.md              # ✨ 编写规范（已更新）
├── quiz-template.json           # ✨ JSON 模板（已更新）
└── 更新说明.md                  # 📝 本文档（新建）
```

## 🎯 核心特性

### LaTeX 公式支持

**行内公式**：
```json
"question": "函数 $f(x) = x^2$ 的导数是 $f'(x) = 2x$"
```

**块级公式**：
```json
"explanation": "根据公式：\\n\\n$$\\nF = ma\\n$$\\n\\n其中..."
```

**常用符号**：
- 分数：`$\\frac{a}{b}$`
- 根号：`$\\sqrt{x}$`
- 积分：`$\\int_a^b f(x) \\, dx$`
- 求和：`$\\sum_{i=1}^{n}$`
- 希腊字母：`$\\alpha, \\beta, \\gamma$`

### 三种题型

1. **单选题** (`type: 'single'`)
   - `correctAnswer`: 数字索引 (0-3)

2. **多选题** (`type: 'multiple'`)
   - `correctAnswer`: 数组 `[0, 1, 2]`

3. **判断题** (`type: 'boolean'`)
   - `correctAnswer`: 0 (正确) 或 1 (错误)

## 📖 使用指南

### 快速开始

1. **查看总览**：阅读 `README.md`
2. **学习教程**：阅读 `快速开始.md`
3. **编写题目**：参考 `题库模板说明.md`
4. **使用模板**：复制 `quiz-template.json`

### 示例查找

- **算法题目**：`题库模板说明.md` → 示例 1
- **数学题目**：`题库模板说明.md` → 示例 2
- **物理题目**：`题库模板说明.md` → 示例 3
- **JSON 示例**：`quiz-template.json` → `示例_LaTeX公式题库`

## ⚠️ 重要注意事项

### JSON 中使用 LaTeX

1. **反斜杠必须转义**：
   ```json
   正确: "$\\frac{1}{2}$"
   错误: "$\frac{1}{2}$"
   ```

2. **换行使用 `\n`**：
   ```json
   "explanation": "说明：\\n\\n$$\\n公式\\n$$\\n\\n继续"
   ```

3. **必须使用 `$` 或 `$$` 格式**：
   - ✅ 行内：`$公式$`
   - ✅ 块级：`$$\n公式\n$$`
   - ❌ 禁止：`\(公式\)` 或 `\[公式\]`

### 前端渲染配置

前端使用 **KaTeX + marked-katex-extension** 渲染公式。

配置要点（已在 `LaTeX 公式规范.md` 中详细说明）：
- `nonStandard: true` - 支持更多符号
- `strict: false` - 宽松模式
- `trust: true` - 支持高级功能

## 🔄 与现有文档的关系

### 引用关系

```
README.md (总览)
  ├─→ 快速开始.md (详细教程)
  ├─→ 题库模板说明.md (编写规范)
  ├─→ quiz-template.json (JSON 模板)
  └─→ ../../LaTeX 公式规范.md (技术实现)
```

### 文档定位

| 文档 | 定位 | 读者 |
|------|------|------|
| `README.md` | 总览和入口 | 所有用户 |
| `快速开始.md` | 操作教程 | 新手用户 |
| `题库模板说明.md` | 编写规范 | 题目编写者 |
| `quiz-template.json` | 实用模板 | JSON 用户 |
| `LaTeX 公式规范.md` | 技术细节 | 开发者 |

## 📊 更新统计

- 📄 **更新文档**: 3 个
- 📄 **新建文档**: 2 个
- 💻 **代码更新**: 1 个
- 🎯 **示例题目**: 15+ 道
- 📐 **LaTeX 符号**: 20+ 个

## 🎓 示例题目分类

### 数据结构（5 题）
- 算法复杂度分析
- 时间复杂度 $O(\log n)$ 示例

### 数学（5 题）
- 微积分：导数、积分、极限
- 公式：$\int_0^1 x^2 \, dx = \frac{1}{3}$

### 物理（3 题）
- 经典力学：牛顿第二定律
- 公式：$F = ma$, $a = \frac{F}{m}$

## ✨ 亮点功能

1. **完整的 LaTeX 支持**
   - 行内公式 + 块级公式
   - 20+ 常用符号
   - JSON 中的正确使用方法

2. **丰富的示例**
   - 算法、数学、物理三大领域
   - TypeScript 和 JSON 双格式
   - 正例和反例对比

3. **详细的文档**
   - 从入门到精通
   - 快速参考和深度指南
   - 常见问题解答

4. **实用工具**
   - CLI 命令
   - npm 脚本
   - API 接口

## 🚀 后续建议

### 可选扩展

1. **更多学科示例**
   - 化学（化学方程式）
   - 计算机科学（代码示例）
   - 经济学（图表公式）

2. **题目难度分级**
   - 基础（1-2 分）
   - 中等（3 分）
   - 困难（4-5 分）

3. **题目标签系统**
   - 知识点标签
   - 难度标签
   - 题型标签

4. **批量导入工具**
   - Excel → JSON 转换器
   - 题目格式验证工具
   - 批量测试工具

## 📞 使用帮助

### 开始使用

```bash
cd backend

# 1. 查看文档
cat quiz-templates/README.md

# 2. 填充示例数据
pnpm quiz:seed

# 3. 启动服务
pnpm dev

# 4. 测试 API
curl http://localhost:5001/api/quiz/ds101
```

### 创建题库

```bash
# 1. 复制模板
cp quiz-templates/quiz-template.json my-quiz.json

# 2. 编辑题目
# 使用 VS Code 或其他编辑器

# 3. 导入数据库
pnpm quiz:import ./my-quiz.json

# 4. 验证结果
curl http://localhost:5001/api/quiz/your-point-id
```

## 🎉 总结

本次更新为 IntelliBuddy 题库系统添加了完整的 **LaTeX 公式支持文档和示例**，使得创建数学、物理等包含公式的题目变得简单直观。

### 核心价值

1. ✅ **降低门槛**：详细的文档和示例让新手快速上手
2. ✅ **提高效率**：模板和工具简化题库创建流程
3. ✅ **保证质量**：最佳实践和验证规则确保题目质量
4. ✅ **支持公式**：完整的 LaTeX 支持覆盖理工科需求

### 文档完整性

- ✅ 入门教程
- ✅ 详细规范
- ✅ 实用模板
- ✅ 代码示例
- ✅ API 文档
- ✅ 常见问题

---

**更新日期**: 2025-01-16  
**版本**: v1.0.0  
**贡献者**: AI Assistant

